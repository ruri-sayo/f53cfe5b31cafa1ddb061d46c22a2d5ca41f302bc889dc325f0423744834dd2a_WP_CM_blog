---
layout: post
title: 小説風git解説
date:   2025-10-18 22:05:21 +0900
categories: [技術, 小説]
---
小説風のgit解説。暇なときの読み物にどうぞ。

# 第1章：Gitの基本概念とローカル操作

## 第1部：バージョン管理とGitの導入

「うわーっ！もう、わけわかんないよー！」

ある日の昼下がり、私の部屋に遊びに来ていた千紘が、ノートPCの前で頭を抱えていた。画面には、似たような名前のフォルダがずらりと並んでいる。

`プロジェクト最終版プロジェクト最終版(1)`

`プロジェクト本当の最終版`

`プロジェクトfinalプロジェクト_提出用`

「千紘、また何か面白そうなこと始めたみたいだけど、ずいぶん盛大に散らかっているわね」

呆れたように声をかけると、千紘が顔を上げた。

「澪ー！聞いてよ聞いてよ！この前見つけたサイトが超面白くて、写経して勉強してるんだけど、どこをどう直したか分からなくなっちゃって！前の状態に戻したいときのためにコピーを作ってたら、どれが最新版で、どれが必要なファイルなのか、もうカオスだよ！」

「ふふ、なるほどね。レポートの編集中とか、誰でも一度は通る道じゃないかしら。でも、そんな千紘にぴったりの、すごく面白いツールがあるのよ」

私がそう言って微笑むと、千紘の目がキランと輝いた。

「え、何それ！？超面白そうじゃん！」

「**Git（ギット）** っていうんだけどね。一言で言うなら、『ファイルのバージョンを管理するための、ものすごく賢い道具』かな」

### ファイルのセーブポイントを作る「バージョン管理」

「バージョン管理？RPGのセーブポイントみたいなもん？」

千紘の突拍子もないようで的を射た質問に、私は思わず頷いた。

「いい例えね。まさにそんな感じよ。作業のキリがいいところで『セーブ』しておけば、後からその時点の状態を正確に確認したり、もし何か失敗しても、そのセーブポイントに安全に戻ったりできるじゃない？」

「うんうん！それで何度も命拾いしたことある！」

「でしょ？千紘がやっていたみたいに、手動でファイルをコピーして『バックアップ_日付』みたいに名前を付けて管理するのも、原始的なバージョン管理の一つ。でも、その方法だと、どのファイルがどう違うのか、いつ何のために変更したのかが、すぐに分からなくなってしまう。現に今、千紘がそうなっているようにね」

Gitは、この「セーブ（変更履歴の記録）」と「ロード（過去の状態に戻す）」を、もっとずっとスマートに、正確に、そして簡単に行うためのシステムなのよ。これを**バージョン管理システム（Version Control System, VCS）**って呼ぶわ。

### Gitが最強な理由：「分散型」という考え方

「しかもね、Gitが特に優れているのは、**『分散型』**っていう仕組みを採用している点なの」

私がそう言うと、千紘は「ぶんさんがた？」と首をかしげた。

「ええ。昔主流だったバージョン管理システムは、いわば『中央集権型』だったの。一つの大きな親玉サーバーに変更履歴のすべてを保存して、みんながそこへアクセスして作業するイメージね。これだと、もし親玉サーバーがダウンしたら、誰も作業できなくなるし、最悪の場合、今までの履歴が全部消えちゃうリスクがあった」

私はノートの切れ端に、簡単な図を描いて見せた。

「でも、Gitが採用している『分散型』は違う。参加しているメンバー一人ひとりが、プロジェクトの最初から最後までの完全な変更履歴を、まるごと自分のPCに持っているの。いわば、冒険の記録史を全員が持っている状態ね」

「これの何がすごいかって言うと、まず、親玉サーバーがなくても、自分のPCだけで履歴の記録や確認ができる。つまりオフラインでも作業が進められるの。それに、誰かのPCが壊れても、他のメンバーのPCから完全な履歴を復元できる。すごく合理的で、安全な仕組みだと思わない？」

私の熱のこもった説明に、千紘は目を輝かせながら何度も頷いた。
「なるほどー！全員がセーブデータを持ってるから、誰かがデータ飛ばしても安心ってことか！それ、超ヤバい！面白いじゃん！澪ー！早くそれ使いたい！」

### Gitの導入：冒険の準備をしよう

「じゃあ、早速冒険の準備を始めましょうか。まずはGitを千紘のPCにインストールしないとね」

### 1. Gitのインストール

Gitは公式サイトからダウンロードできるわ。自分のOSに合ったインストーラーを選んでね。

- [Git公式サイト](https://git-scm.com/downloads)

インストール自体は、基本的に画面の指示に従って「Next」をクリックしていけば大丈夫。途中でいろいろ設定を聞かれるけど、最初はすべてデフォルトのままで問題ないわ。

### 2. 最初の設定：自分の名前を登録する

インストールが終わったら、最初に一度だけ「自己紹介」が必要よ。これから作るセーブデータに、「これは私が記録しました」っていう署名を入れるための設定ね。

Windowsなら「Git Bash」を、Macなら「ターミナル」を起動して、以下の2つのコマンドを一行ずつ入力して実行してみて。

```
git config --global user.name "Your Name"
git config --global user.email "youremail@example.com"

```

`"Your Name"`の部分は自分の名前（半角英字がおすすめ）、`"youremail@example.com"`の部分は自分のメールアドレスに書き換えてね。これはGitHubに登録するものと同じにしておくと、後々スムーズよ。

「え、これだけ？」

「ええ、これだけ。入力しても何もメッセージが返ってこないけど、それで正常に設定されているから安心して。さあ、これで準備は万端よ」

私はニヤリと笑って千紘を見た。

「ここからが、Gitを使った新しい冒M…じゃなくて、開発の始まりよ、千紘」

## 第2部：リポジトリの作成と「3つのエリア」

「冒険の始まり…！いいねいいね！で、まず何をすればいいの？ボスはどこー！？」

すっかりその気になった千紘が拳を握りしめるのを、私は微笑ましく思いながら制した。

「落ち着きなさい、千紘。冒険にだって準備は必要よ。まずは、これから記録していく私たちの冒険の歴史…つまり、ファイルの変更履歴をしまっておくための『保管庫』を作るところから始めましょう」

「ほかんこ？」

「ええ。Gitではその保管庫のことを**リポジトリ**って呼ぶわ。言ってみれば、プロジェクト専用のタイムカプセルみたいなものね。このリポジトリがあるおかげで、いつでも過去の時点に戻れるようになるの」

### リポジトリの作成： `git init`

「じゃあ、さっそく作ってみましょうか。まず、千紘が今散らかしてるプロジェクトのために、新しいフォルダを一つ作ってくれる？」

「お、おう！任せとけ！」

千紘は慌ててデスクトップに`my-project`という名前のフォルダを作成した。

「OK。そしたら、さっき使ったGit Bash（Macならターミナル）で、そのフォルダに移動するの。`cd`っていうコマンドを使うわよ」

千紘は慣れない手つきでキーボードを叩き、`cd Desktop/my-project`と入力してEnterキーを押した。

「よし、ちゃんと移動できたわね。じゃあ、いよいよリポジトリを作るための呪文を唱えるわよ」

私がもったいぶってそう言うと、千紘はごくりと唾を飲んだ。

```
git init

```

「コマンドはこれだけ。`init`は『初期化する』っていう意味のinitializeの略ね。さあ、実行してみて」

千紘がコマンドを打ち込むと、ターミナルに`Initialized empty Git repository in C:/Users/Chihiro/Desktop/my-project/.git/`といったメッセージが表示された。

「わ、何か英語が出てきた！澪ー！これって成功したってこと？」

「ええ、大成功よ。『この場所に、空っぽのGitリポジトリを作りました』って言ってるわ。これで、この`my-project`フォルダは、ただのフォルダじゃなくて、Gitが変更を監視してくれる特別な『保管庫』になったの。証拠に、フォルダの中に`.git`っていう隠しフォルダができているはずよ」

実際に確認すると、そこには`.git`という見慣れないフォルダが作られていた。

「この`.git`フォルダこそがリポジトリの本体。変更履歴とか、管理に必要な情報が全部この中に詰まってるわ。だから、絶対にこのフォルダを直接いじったり、消したりしちゃダメよ。約束ね」

「りょ、了解！なんか超重要アイテムって感じだね！」

### 最重要概念：「3つのエリア」を理解する

「さて、保管庫はできた。でも、ただファイルを変更しただけじゃ、自動で記録はしてくれないの。Gitに『この変更を記録してください』って、ちゃんとお伺いを立てる必要がある。その手順を理解するために、Gitが使う**『3つのエリア』**という、ものすごく大事な考え方を説明するわね」

私はまたノートの切れ端を取り出し、ペンで図を描き始めた。

「まず、私たちが普段ファイルを編集している場所、つまり今作った`my-project`フォルダそのものが**① ワーキングディレクトリ**。いわば『作業場』ね」

「うんうん、作業場」

「次に、変更したファイルの中から、『よし、これは次のセーブデータに含めよう』と決めたものを置いておく、一時的な待機場所があるの。これが**② ステージングエリア**。『舞台袖』ってイメージかしら。舞台に出す準備ができた役者を待たせておく場所ね」

「ぶたいそで！面白いじゃん！」

「そして最後に、舞台袖にいる役者たちを、『開演！』の合図で本番の記録として保管庫に登録する。その保管庫が**③ リポジトリ**。これが最終的なセーブポイントになるわけ」

この3つのエリアの関係をまとめると、こうなるわ。

1. **ワーキングディレクトリ**でファイルを編集する。
2. 記録したい変更を`git add`コマンドで**ステージングエリア**に送る（これを**ステージする**と言うわ）。
3. ステージングエリアにある変更内容を`git commit`コマンドで**リポジトリ**に記録する（これを**コミットする**と言うの）。

「なんでそんな面倒なことするの？作業場で変更したら、直接セーブ（リポジトリに記録）じゃダメなの？」

千紘の素朴な疑問に、私は満足げに頷いた。

「いい質問ね。例えば、一度に5つのファイルを変更したとするじゃない？でも、そのうち3つは『機能Aの実装』に関する変更で、残りの2つは『ちょっとした誤字脱字の修正』だった。これを全部まとめて一つのセーブデータにしちゃうと、後から見返したときに『このセーブでは何をしたんだっけ？』って分かりにくくなるでしょ？」

「あー、確かに！」

「ステージングエリアというワンクッションを挟むことで、『今回はこのファイルとこのファイルの変更だけを、"機能Aの実装"という名前で記録しよう』みたいに、関連する変更だけを、意味のある単位で選び取ってから記録できるの。これが、後々の管理をとっても楽にしてくれるのよ」

### 現状確認の達人になろう： `git status`

「じゃあ、今の私たちの冒険の状況を確認してみましょうか。ここで一番よく使うことになるコマンドを教えるわ」

```
git status

```

「`status`は『状態』っていう意味。その名の通り、今のリポジトリの状態を教えてくれる、ものすごくお世話になるコマンドよ。何か困ったら、まず`git status`。これを癖にしておくといいわ」

千紘がコマンドを打つと、ターミナルにメッセージが表示された。

```
On branch master
No commits yet
nothing to commit (create/copy files and use "git add" to track)

```

「『masterブランチにいます』『まだコミット（記録）は一つもありません』『コミットするものは何もありません』って書いてあるわね。まさに今の状況そのもの」

「じゃあ、試しに何かファイルを作ってみて。`my-project`フォルダの中に、`index.html`っていう空のファイルを作ってみてくれる？」

千紘がファイルを作成し、もう一度`git status`を実行すると、今度は表示が変わった。

```
On branch master
No commits yet
Untracked files:
  (use "git add <file>..." to include in what will be committed)
        index.html

nothing added to commit but untracked files present (use "git add" to track)

```

「わ、何か赤い文字が出た！`index.html`って書いてある！」

「その通り。『Untracked files』、つまり『まだGitの管理下に置かれていない、未知のファイルがありますよ』って教えてくれてるの。Gitは賢いから、フォルダ内に新しいファイルが作られたことをちゃんと検知して、『このファイル、どうしますか？ステージングエリアに加えますか？』って聞いてきてるわけ」

私はニヤリと笑った。

「どう？Gitが私たちの作業をちゃんと見ててくれる、頼もしい相棒だってことが、少しは分かってきたんじゃない？」

千HORIは興奮気味に頷いた。
「うん！なんかすごい！面白いじゃん！早くこの赤いヤツを何とかしたい！」

「ふふ、じゃあ次は、いよいよ最初のセーブデータ、『コミット』を作ってみましょうか」

## 第3部：変更履歴の記録と確認

「ふふ、じゃあ次は、いよいよ最初のセーブデータ、『コミット』を作ってみましょうか」

私の言葉に、千紘は「待ってました！」とばかりに身を乗り出した。

「`git status`で赤く表示された`index.html`は、Gitが『こんなファイルを見つけたけど、どうする？』って私たちに尋ねてきている状態だったわよね。これに答える最初のステップが、そのファイルを『舞台袖』、つまりステージングエリアに上げてあげることなの」

### 変更をステージする： `git add`

「そのためのコマンドがこれよ」

```
git add <ファイル名>

```

「`add`は『加える』。文字通り、リポジトリに記録したい変更内容の候補として、ファイルをステージングエリアに加えてあげる、という意味ね。今回は`index.html`を加えたいから、こう入力してみて」

```
git add index.html

```

千紘がコマンドを打ち込んでも、ターミナルは沈黙したまま。

「あれ？また何も起きないよ？失敗？」

「ううん、成功よ。Gitやこういうコマンドラインのツールはね、『何も言ってこないのは、うまく行った証拠』ってことが多いの。じゃあ、本当にステージングエリアに上がったか、あのコマンドで確認してみましょうか」

「あ！わかった！`git status`でしょ！」

千紘は得意げに`git status`を打ち込んだ。すると、さっきとはまた違う色のメッセージが表示された。

```
On branch master
No commits yet
Changes to be committed:
  (use "git rm --cached <file>..." to unstage)
        new file:   index.html

```

「わー！今度は緑色になった！『Changes to be committed』だって！」

「その通り！『コミットされるべき変更』っていう意味ね。これで`index.html`は、ワーキングディレクトリからステージングエリアへと無事に移動した。Gitが『このファイルを次のセーブに含める準備ができましたよ』って教えてくれてるの」

「なるほどー！赤は『未知との遭遇』で、緑は『仲間になった』って感じだね！」

「ふふ、そんなところね。さあ、いよいよ本番よ。舞台袖にいるこのファイルを、歴史の1ページとしてリポジトリに刻みましょう」

### 変更を記録する： `git commit`

「ステージングエリアにある変更を、リポジトリという名の保管庫に永久保存する。これが**コミット**よ。RPGで言えば、教会の神父様に冒険の書を記録してもらう、まさにその瞬間ね。コマンドはこう」

```
git commit

```

「ただし、これだけだと少し不親切なの。神父様だって、『どんな冒険をしてきたのか』を一言メモで残してくれるでしょ？Gitでも、『今回は何のためのセーブなのか』をちゃんと記録しておく必要がある。そのメモのことを**コミットメッセージ**って言うわ」

私は千紘に、メッセージ付きでコミットする、一番簡単な方法を教えた。

```
git commit -m "コミットメッセージ"

```

「`-m`っていうのは『メッセージ』のオプション。この後ろの`" "`で囲んだ部分に、変更内容を要約したメモを書くの。後から自分や他の人が見たときに、『ああ、この時のセーブは、こういう変更をしたんだな』って一目でわかるようにね。今回は最初のコミットだから、『`index.html`を作成』みたいな内容でいいんじゃないかしら」

「おっけー！じゃあ…こうかな？」

千紘はキーボードを叩いた。

```
git commit -m "Create index.html"

```

Enterキーを押すと、今度はたくさんのメッセージが返ってきた。

```
[master (root-commit) a1b2c3d] Create index.html
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 index.html

```

「うわっ！また英語がいっぱい！でもなんかすごそう！」

「ええ、大成功。『masterブランチに、"Create index.html"というメッセージで新しいコミットが作られました』『1つのファイルが変更されましたよ』って内容ね。これで、千紘のプロジェクト史上、記念すべき最初のセーブポイントが作られたわ」

もう一度`git status`を叩くと、今度は`nothing to commit, working tree clean`と表示された。作業場は綺麗で、記録すべき変更はもう何もない、という状態だ。

### 冒険の書を読み返す： `git log`

「じゃあ、せっかくだから今記録したばかりの冒険の書を読み返してみましょうか。過去のコミット履歴を確認するのが、このコマンドよ」

```
git log

```

千紘が実行すると、ターミナルに先ほどのコミットの情報が詳しく表示された。

```
commit a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0 (HEAD -> master)
Author: Chihiro <chihiro@example.com>
Date:   Thu Oct 9 10:48:00 2025 +0900

    Create index.html

```

「わー！私の名前とメールアドレス、それに日時と、さっき書いたメッセージがちゃんと記録されてる！」

「でしょ？この`commit`から始まる長い文字列が、セーブデータ一つひとつに割り振られた、世界で一つだけのID番号みたいなもの。そして、誰が、いつ、何のために変更したかが、こうして一目瞭然になる。これが、手作業でファイルをコピーするのとは比べ物にならないくらい、Gitが優れている点なのよ」

私は`index.html`を開き、千紘に何か簡単な文字を入力するように促した。千紘は楽しそうに`<h1>Hello, Git!</h1>`と打ち込んだ。

「さあ、ファイルの中身が変わったわ。ということは？」

「あ！もしかして、また`git status`をすると何か変わる！？」

千紘がコマンドを打つと、案の定、`index.html`が今度は`modified`（変更された）という状態で、また赤く表示された。

「面白いじゃん！じゃあ、これもさっきと同じように、`git add`で緑にして、`git commit`でセーブすればいいんだね！」

「その通りよ。やってみて。メッセージは『見出しを追加』とか、分かりやすいものがいいわね」

千紘は慣れた手つきでコマンドを打ち込んでいく。

```
git add index.html
git commit -m "Add h1 heading"

```

そして、もう一度`git log`を実行した。

```
commit f0e9d8c7b6a5f4e3d2c1b0a9f8e7d6c5b4a3b2a1 (HEAD -> master)
Author: Chihiro <chihiro@example.com>
Date:   Thu Oct 9 10:52:00 2025 +0900

    Add h1 heading

commit a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0
Author: Chihiro <chihiro@example.com>
Date:   Thu Oct 9 10:48:00 2025 +0900

    Create index.html

```

「わー！増えてる！ちゃんと2つ目の記録が、最初の記録の上に積み重なってる！」

「そういうこと。こうして、変更の歴史を一つひとつ、安全に、そして正確に積み重ねていく。これがGitの基本的な使い方。**『変更 → add → commit』**このサイクルが、これからの冒険の基本になるわ」

千紘は、さっきまでカオスだったデスクトップと、今ターミナルに表示されている整然とした歴史を見比べて、深く頷いた。

「すごい…なんか、超面白いじゃん、Git！私、最強のセーブ職人になれる気がしてきた！」

その満面の笑みを見て、私も嬉しくなった。

「ふふ、その意気よ。じゃあ、自分のPCの中での冒険はこれくらいにして、次は、この冒険の書を世界に公開して、他の人と共有する方法を学びましょうか」

# 第2章：GitHubとの連携とリモート操作

## 第1部：GitHubアカウントの作成とリモートリポジトリ

「私、最強のセーブ職人になれる気がしてきた！」

目をキラキラさせながら自分のPCの画面を眺めている千紘に、私は微笑みかけた。

「ふふ、その意気よ。でもね、千紘。本当の冒険は、まだ始まったばかり。今千紘が作っている冒険の書は、まだ千紘のPCの中にしかない、いわば『日記』みたいなものなの」

「日記？」

「ええ。でも、すごい冒険譚が書けたら、誰かに読んでほしくなるし、仲間と一緒に冒険の続きを書き加えたくなると思わない？」

「なるなる！超なる！みんなに自慢したい！」

「でしょ？そのために、自分のPC（**ローカル**）にある冒険の書を、インターネット上にある大きな図書館に預けて、世界中に公開したり、仲間と共有したりするための場所が必要になる。その、世界中の開発者が使っている巨大な図書館こそが、**GitHub（ギットハブ）**なのよ」

### GitとGitHubの違い：魔法の書と大図書館

「ぎっとはぶ？Gitと名前は似てるけど、何が違うの？」

千紘の素朴な疑問に、私は頷いた。

「いいところに気が付いたわね。この二つは、よく混同されるけど、役割は全く違うのよ」

- **Git**: バージョン管理をするための**『仕組み・道具』**そのもの。歴史を記録する魔法の書、とでも言おうかしら。
- **GitHub**: Gitで作ったその魔法の書（リポジトリ）を、インターネット上で保管・公開するための**『場所・サービス』**。世界中の魔法の書が集まる大図書館ね。

「なるほどー！Gitっていう魔法でセーブデータを作って、GitHubっていう図書館に預かってもらうんだね！分かりやすいじゃん！」

「そういうこと。だから、他の人と共同で作業するには、このGitHubが欠かせないの。さあ、まずはこの大図書館の利用者カード、つまりアカウントを作ることから始めましょう」

### GitHubアカウントの作成

「GitHubのサイトにアクセスしてみて。Googleとかで検索すればすぐに見つかるわ」

- [GitHub公式サイト](https://github.com/)

千紘がサイトを開くと、英語のページが表示された。

「うわ、英語じゃん！？」

「大丈夫、大丈夫。最近は日本語にも対応してるし、入力するのはユーザー名とメールアドレス、パスワードくらいだから。画面の指示に従って登録を進めてみて」

ユーザー名は、世界中でユニーク（他の人と同じものは使えない）である必要があるわ。後から変更もできるけど、なるべく自分が愛着を持てる、分かりやすいものがいいわね。

千紘は少し悩んだ末に、`chihiro-adventurer`という、なんとも彼女らしいユーザー名で登録を完了させた。

「できたー！私、今日から図書館デビューだよ！」

「おめでとう。じゃあ、いよいよ千紘の冒険の書を置くための、専用の書棚を作りましょうか」

### リモートリポジトリの作成

「GitHubに預けるリポジトリのことを、自分のPCにある**ローカルリポジトリ**と対比して、**リモートリポジトリ**と呼ぶわ。『遠隔の』っていう意味の、あのリモートね」

ログインした状態で、画面の右上にある「+」のアイコンをクリックして、「New repository」を選んでみて。

「お、何か入力フォームがいっぱい出てきた！」

「一つずつ説明するから、落ち着いて」

1. **Repository name**: リポジトリの名前ね。これは自分のアカウント内ではユニークである必要があるわ。ローカルリポジトリと同じ`my-project`にしておくのが分かりやすいでしょう。
2. **Description**: このリポジトリがどんなプロジェクトなのかを説明する場所。今は空欄でもいいわよ。
3. **Public / Private**: `Public`を選ぶと、このリポジトリは世界中の誰でも見ることができるようになるわ。`Private`なら、自分と、自分が許可した人しか見られない。勉強用なら`Public`でいいでしょう。
4. **Initialize this repository with:**: 「このリポジトリを初期化するファイルを追加しますか？」というオプションね。`Add a README file`とかいくつかあるけど…**今回は、絶対に何もチェックを入れないで。**

「え、なんで？READMEってよく見るやつじゃん」

「いい質問ね。今回は、すでに自分のPCに『冒険の書（ローカルリポジトリ）』がある状態で、それを預けるための『空の書棚（リモートリポジトリ）』を作りたいの。もしここでファイルを追加しちゃうと、空っぽじゃない書棚ができてしまって、預けるときにちょっとしたひと悶着が起きるのよ。今は、『まっさらな場所を用意する』ってことだけを覚えておいて」

千紘は私の説明に頷きながら、必要な項目を埋めて、緑色の「Create repository」ボタンをクリックした。

すると、画面が切り替わり、何やらコマンドがいくつか表示されたページが現れた。

「わ、また英語のコマンドがいっぱい！澪ー！これ、どうすればいいの！？」

慌てる千紘を見て、私は満足げに微笑んだ。

「ふふ、慌てないで。これはね、GitHubが『空っぽの書棚は用意できましたよ。ここにあなたの魔法の書を置くには、この呪文を唱えなさい』って、親切に教えてくれている、いわば『接続のための地図』なのよ」

私はその画面を指さした。

「さあ、冒険の準備は整ったわ。次は、この地図を使って、いよいよあなたのPCと、このGitHubという大図書館を、一本の魔法の線で繋いでみましょうか」

## 第2部：ローカルリポジトリとリモートリポジトリの接続

「さあ、冒険の準備は整ったわ。次は、この地図を使って、いよいよあなたのPCと、このGitHubという大図書館を、一本の魔法の線で繋いでみましょうか」

私が指さしたGitHubの画面には、`…or push an existing repository from the command line`という見出しの下に、いくつかのコマンドが並んでいる。

「この英語のコマンドたち、一見すると難しそうだけど、やってることはすごくシンプルよ。千紘のPCの中にある冒行の書（ローカルリポジトリ）に、『あなたの置き場所は、この大図書館（GitHub）の、この住所の書棚ですよ』って教えてあげるだけ」

「住所…なるほど！」

「そのための最初のコマンドがこれね」

### リモートリポジトリのURLを登録する： `git remote add`

私は画面に表示されている一行を指さした。

```
git remote add origin https://github.com/chihiro-adventurer/my-project.git

```

「コマンドを分解してみるわね」

- `git remote`: リモートリポジトリに関する操作をしますよ、という合図。
- `add`: これから新しいリモートリポジトリの情報を追加します、という意味。
- `origin`: これから追加するリモートリポジトリに付ける『あだ名』よ。一般的に、一番メインになるリモートリポジトリには`origin`（『起源』とか『元』っていう意味）って名前を付けるのが慣習なの。
- `https://...git`: そして、これがリモートリポジトリの具体的な『住所』、つまりURLね。

「つまり、『`origin`というあだ名で、この住所をリモートリポジトリとして登録します』っていう命令なの。さあ、この一行をコピーして、Git Bashに貼り付けて実行してみて」

千紘がコマンドを実行すると、またしてもターミナルは沈黙した。

「うん、成功ね。これで、千紘のローカルリポジトリは、GitHub上のリモートリポジトリの場所を覚えたわ」

### ブランチ名を変更する： `git branch -M main`

「次に、もう一つだけ準備。GitHubの画面にある、次のコマンドを見てくれる？」

```
git branch -M main

```

「これはね、私たちの冒険の書の『メインストーリーの章』の名前を、`master`から`main`に変えるためのコマンドなの。昔は`master`という名前が一般的だったんだけど、最近では`main`という名前を使うのが主流になっているのよ。大図書館の作法に合わせて、章の名前を書き換えておきましょう、っていうおまじないみたいなものね」

千紘は言われた通りにコマンドを実行した。これで、ローカルリポジトリのメインブランチの名前が`main`に変更された。

### ローカルの変更を送信する： `git push`

「さあ、住所も覚えたし、章の名前も整えた。いよいよ、千紘のPCに記録してきた冒険の歴史を、GitHubの大図書館に送り届ける時が来たわ。そのためのコマンドが**push（プッシュ）**よ」

```
git push -u origin main

```

「これも分解すると…」

- `git push`: ローカルリポジトリの変更内容を、リモートリポジトリに送信（アップロード）します、という命令。
- `u origin main`: 『`origin`というあだ名のリモートリポジトリの、`main`というブランチ（章）に対してプッシュします』という意味になるわ。

「 `-u` っていうのは何なの？」

「いい質問ね。これは`--set-upstream`の略で、『これからの`push`や`pull`は、基本的にこの`origin`の`main`ブランチとやり取りするのを基本にしますね』っていう設定を、最初の一回だけしてあげるためのオプションなの。これを一度やっておけば、次からは単に`git push`って打つだけで、同じ場所に送信してくれるようになるのよ」

「へぇー！便利じゃん！」

「じゃあ、いよいよ実行してみて。もしかしたら、GitHubのユーザー名とパスワードを聞かれるかもしれないわ」

千紘がコマンドを叩くと、ターミナルに何行かのメッセージが表示され、アップロードの進捗を示すような表示が出た後、最終的に`Branch 'main' set up to track remote branch 'main' from 'origin'.`といったメッセージが表示された。

「できた…の！？なんかうまくいったっぽいメッセージが出てるよ！」

「ええ、完璧よ。じゃあ、証拠を確認しに行きましょうか。さっきのリモートリポジトリのGitHubのページを、ブラウザで更新してみて」

千紘が恐る恐る更新ボタンをクリックすると、さっきまでコマンドが表示されていただけの殺風景なページが、一変していた。

「わーーーーーっ！すごい！私の作った`index.html`がここにいる！コミットのメッセージもちゃんと表示されてる！」

そこには、ローカルで作った`index.html`ファイルと、2つのコミット履歴が、間違いなく表示されていた。自分のPCの中だけで完結していた冒険の書が、インターネットという広大な世界に、確かにその第一歩を刻んだ瞬間だった。

「どう？自分の書いたコードが、こうして世界中のどこからでも見られる場所に置かれた気分は」

「最高！超すごいじゃん！なんか私、本物のプログラマーになった気分だよ！」

千紘は子供のようにはしゃいでいる。その姿を見て、私は静かに頷いた。

「ええ、そうよ。あなたはもう、立派な冒険者。そして、このGitHubという図書館を使えば、世界中の冒-険者と繋がることができる。じゃあ次は、他の人が書いた冒険の書を、自分のPCに持ってくる方法を学んでみましょうか」

## 第3部：他の人のプロジェクトに参加する

「最高！超すごいじゃん！なんか私、本物のプログラマーになった気分だよ！」

自分のプロジェクトがGitHubに公開されたことで、千紘はすっかり有頂天になっていた。その興奮が冷めやらないうちに、私は次のステップへと彼女を誘う。

「ええ、そうよ。あなたはもう、立派な冒険者。そして、このGitHubという図書館を使えば、世界中の冒険者と繋がることができる。じゃあ次は、視点を変えてみましょうか」

「視点を変える？」

「そう。今までは、千紘が『自分の冒険の書』を図書館に預ける、という話だったわよね。今度は逆に、図書館に置いてある『他の誰かの冒険の書』を、自分の机に持ってきて読んでみたり、続きを書き加えるための準備をしたりする方法を学ぶの」

「おおー！他の人のプロジェクトに参加するってことだね！面白そうじゃん！」

「その通り。じゃあ、練習台として、私が作ったプロジェクトがGitHubにあるから、それを千紘のPCに持ってくる、というのをやってみましょうか」

### 既存のリポジトリを複製する： `git clone`

「GitHubにある公開プロジェクトを手元に持ってくるのは、実はすごく簡単。たった一つのコマンドで、プロジェクトのファイル一式はもちろん、これまでの全ての歴史、つまりコミット履歴も丸ごとコピーしてこられるの。その魔法のコマンドが **clone（クローン）** よ」

「クローン！SF映画みたいでかっこいいじゃん！」

「ふふ、まさにそんなイメージね。プロジェクトの完全な複製を作る、という意味だから。やり方はこう」

```
git clone <リモートリポジトリのURL>

```

「私が用意したプロジェクトのURLはこれよ」と、私はチャットでURLを送った。千紘の画面に `https://github.com/mio-example/sample-project.git` という文字列が表示される。

「このURLをコピーしたら、まずは今の作業場所から一つ上の階層に戻りましょうか。`cd ..` って覚えてる？」

「うん！ディレクトリを移動するやつ！」

千紘が`cd ..`を実行し、`my-project`の外に出たことを確認してから、私は続けた。

「じゃあ、そこでさっきの`git clone`コマンドを実行してみて」

```
git clone https://github.com/mio-example/sample-project.git

```

コマンドが実行されると、ターミナルに`Cloning into 'sample-project'...`といったメッセージが表示され、何かがダウンロードされていく様子が見えた。

「わ、何か始まった！…終わったみたい！」

「じゃあ、`ls`コマンドで、今いる場所にどんなファイルやフォルダがあるか確認してみて」

千紘が`ls`を叩くと、そこには`my-project`と並んで、新しく`sample-project`という名前のディレクトリが作られていた。

「本当だ！`sample-project`ってフォルダができてる！これって…」

「ええ、それが私のプロジェクトの完全なクローンよ。`cd sample-project`で中に入って、`git log`を叩いてみてくれる？」

千紘が言われた通りに操作すると、画面には彼女が見たことのないコミット履歴が表示された。

`Author: Mio <mio@example.com>`という、私の名前で作られたいくつかのセーブデータが、そこにはっきりと記録されていた。

「すごい！澪が作った歴史が、そっくりそのまま私のPCに来ちゃった！ただファイルをダウンロードするのとは、全然違うんだね！」

「その通り。これが`clone`のすごいところ。あなたは今、このプロジェクトの歴史の全てを手に入れた。これで、千紘もこのプロジェクトの開発に参加する準備が整った、というわけ」

### リモートの更新を取り込む： `git pull`

「さて、ここからが共同作業の面白いところよ」

私はそう言うと、自分の手元のPCを操作し始めた。

「今、私がこの`sample-project`に、一つ新しいファイルを追加して、GitHubに`push`したわ。GitHubのプロジェクトページをブラウザで更新してみて」

千紘がページを更新すると、ファイル一覧に`new-feature.txt`という、さっきまでなかったファイルが表示されている。

「あ！本当だ！ファイルが増えてる！」

「でも、千紘のPCの中にある`sample-project`は、まだ古いままのはずよ。`ls`で確認してみて」

千紘が確認すると、案の定、ローカルのディレクトリに`new-feature.txt`は存在しなかった。

「ほんとだ、ない…。じゃあ、このままだと、私の冒険の書は古い情報ってことになっちゃうの？」

「その通り。だから、他の人が更新した最新の歴史を、自分のPCに持ってきて反映させる必要がある。そのためのコマンドが **pull（プル）** よ。『引っ張ってくる』っていう意味ね」

```
git pull

```

「`clone`してきたリポジトリでは、もうリモートの場所は登録済みだから、単に`git pull`と打つだけでいいの。さあ、実行してみて」

千紘がコマンドを実行すると、ターミナルに変更内容をダウンロードした旨のメッセージが表示された。

「じゃあ、もう一度`ls`を」

「あーーーーっ！`new-feature.txt`がいる！私のPCにやってきた！」

千紘は、まるで魔法でも見たかのように目を丸くしている。

「これが、チームで開発を進める上での基本サイクル。誰かが`push`した変更を、別の人が`pull`で受け取る。こうして、みんなが常に最新の状態で作業を進めていくの」

私は満足げに頷いた。

「これで、自分の冒険の書を世界に発信する方法（push）と、他の人の冒険の書を自分のものにする方法（clone）、そして最新の物語を取り込む方法（pull）を学んだわね」

「うん！なんか、GitとGitHubが最強の道具だってことが、よーく分かったよ！」

「ふふ、それなら良かった。でもね、千紘。もし、同じ本の同じページを、あなたと私が同時に書き換えてしまったら、どうなると思う？」

「え…？ケンカになる？」

「そう、Gitの世界ではそれを**コンフリクト（競合）**って言うの。そして、そのケンカを避けるための、もっと賢くて安全な方法がある。次は、そのための『ブランチ』という、Git最強の機能を学びましょうか」

# 第3章：並行開発のためのブランチ戦略

## 第1部：ケンカしないための最強の魔法、ブランチ

「`push`と`pull`と`clone`！なんかもう、私、Gitマスターに近づいてきたんじゃない！？」

「ふふ、頼もしいわね。でも、本当の冒険はここからよ。千紘、もし同じ本の同じページを、あなたと私が同時に書き換えてしまったら、どうなると思う？」

私の問いに、千紘は少し考えてから答えた。

「え…？ケンカになる？」

「そう、Gitの世界ではそれを**コンフリクト（競合）**って言うの。どっちの変更を優先すればいいか、Gitが分からなくなってしまう状態ね。これを解決するのは、結構大変な作業なの」

「うわー、それは面倒くさそうじゃん…」

「でしょう？だから、そんな面倒なことにならないように、もっと賢くて安全な方法があるの。それが、これから学ぶ**ブランチ**という、Git最強の機能よ」

### ブランチとは？：冒険の書を分岐させる魔法

「ブランチって、木の枝のこと？」

「ええ、そのイメージで合ってるわ。今の私たちの冒険の書は、`main`という一本の太い幹に、歴史をずっと記録し続けている状態。でも、例えば『新しい魔法を試作する』とか『ちょっと危険なダンジョンを偵察する』みたいな、本編にすぐに入れるか分からないような追加ストーリーを書きたい時、いきなりメインの幹に書き込んじゃうのは危ないと思わない？」

「確かに！失敗したら、メインストーリーがぐちゃぐちゃになっちゃうもんね」

「その通り。そこでブランチの出番よ。ブランチを切る（作成する）と、その時点の冒険の書の完璧なコピーが作られて、そこから新しい歴史を刻み始めることができるの。メインの幹には一切影響を与えずにね。まるで、**パラレルワールドを作る**ようなものよ」

「パラレルワールド！面白そうじゃん！」

「ええ。そして、パラレルワールドでの冒険（新機能の開発）がうまくいって、『これは本編にも取り込もう！』ってなったら、その歴史をメインの幹に合流（**マージ**）させることができる。もし失敗したら、そのブランチは誰にも迷惑をかけずに、こっそり消してしまえばいい。これがブランチの基本的な考え方よ」

### ブランチの基本操作

「じゃあ、早速やってみましょうか。今いる`sample-project`で、新しい機能を追加するためのブランチを作ってみるわよ」

### ブランチの作成と一覧表示： `git branch`

「ブランチを作るコマンドは、すごくシンプル」

```
git branch <新しいブランチ名>

```

「じゃあ、『新しい機能』っていう意味で、`add-new-feature`という名前のブランチを作ってみて」

千紘がコマンドを叩く。`git branch add-new-feature`。またしても、ターミナルは沈黙した。

「うん、これでブランチができたわ。どんなブランチがあるか確認するには、ブランチ名を付けずに`git branch`コマンドだけを打つと、一覧が表示されるのよ」

```
git branch

```

千紘が実行すると、画面にこう表示された。

```
  add-new-feature
* main

```

「わ、二つある！`*`が付いてるのが、今自分がいる場所ってこと？」

「大正解。さすがね、千紘。今はまだ`main`ブランチにいる、ということね」

### ブランチの切り替え： `git switch`

「じゃあ、新しく作ったパラレルワールドに移動しましょうか。ブランチを切り替えるには、`switch`コマンドを使うわ」

```
git switch <移動したいブランチ名>

```

「さあ、`git switch add-new-feature`を実行して」

千紘がコマンドを実行すると、`Switched to branch 'add-new-feature'`というメッセージが表示された。

「メッセージが出た！じゃあ、もう一度`git branch`で現在地を確認してみて」

```
* add-new-feature
  main

```

「本当だ！`*`が移動してる！私、今パラレルワールドにいるんだね！」

### ブランチの独立性を体感する

「じゃあ、この新しいブランチで、冒険の書に何か書き加えてみましょうか。例えば、新しいファイルを作ってみるのが分かりやすいわね」

千紘は言われた通り、`touch feature.txt`というコマンドで新しいファイルを作り、中身を少し編集してから、いつもの手順でコミットした。

```
git add feature.txt
git commit -m "Add new feature file"

```

「よし、コミットできたよ！`git log`で見ても、ちゃんと新しい歴史が記録されてる！」

「ええ、完璧ね。じゃあ、ここで元の世界、`main`ブランチに戻ってみましょうか。`git switch main`よ」

千紘がブランチを`main`に戻す。そして、私は言った。

「じゃあ、`ls`コマンドで、今いる場所のファイル一覧を見てみて」

「え…？あれ…？`feature.txt`が…ない！？」

画面には、`feature.txt`が存在しない、元の状態のファイル一覧が表示されていた。

「`git log`も見てみて」

千紘がログを見ると、そこには先ほど彼女が作った`"Add new feature file"`というコミットは影も形もなかった。

「うそ！？消えちゃったの！？」

「ううん、消えたんじゃないわ。ちゃんと`add-new-feature`ブランチに記録されてる。もう一度`git switch add-new-feature`で戻ってみて」

千紘が慌ててブランチを戻すと、そこには`feature.txt`も、新しいコミットも、ちゃんと存在していた。

「わ、わ、わ、すごい！本当に世界が分かれてるんだ！これなら、安心して何でも試せるじゃん！」

千紘は、ブランチという魔法の本当のすごさを、身をもって体験した。

「ふふ、でしょう？これがブランチの力よ。メインの世界を汚さずに、安全な場所で自由に開発を進めることができる。さて、千紘。この素晴らしい新機能を、いよいよメインストーリーにデビューさせてあげたいと思わない？」

「うん！超思う！」

「じゃあ次は、この二つに分かれた世界を、再び一つに統合する方法、**マージ**について学びましょうか」

## 第2部：世界の統合『マージ』と避けられない宿命『コンフリクト』

「わ、わ、わ、すごい！本当に世界が分かれてるんだ！これなら、安心して何でも試せるじゃん！」

ブランチの本当の力に、千紘はすっかり興奮していた。

「ふふ、でしょう？これがブランチの力よ。メインの世界を汚さずに、安全な場所で自由に開発を進めることができる。さて、千紘。この素晴らしい新機能を、いよいよメインストーリーにデビューさせてあげたいと思わない？」

「うん！超思う！」

「じゃあ次は、この二つに分かれた世界を、再び一つに統合する方法、**マージ**について学びましょうか」

### ブランチの統合： `git merge`

「マージは『合流させる』っていう意味。`add-new-feature`ブランチで加えた変更の歴史を、`main`ブランチの歴史に合流させるの。やり方は簡単だけど、一つだけ大事なルールがあるわ」

「ルール？」

「**『合流させたい先のブランチ』に移動してから、マージを実行する**こと。今回は`main`ブランチに`add-new-feature`の変更を取り込みたいから、まずは`main`ブランチにいることを確認するの」

千紘は`git switch main`で`main`ブランチに戻った。

「よし、`main`にいるよ！」

「OK。じゃあ、いよいよ統合の呪文を唱えるわよ」

```
git merge <合流させたいブランチ名>

```

「今回は`add-new-feature`を合流させたいから…」

「`git merge add-new-feature`だね！」

千紘がコマンドを叩くと、ターミナルに`Updating ...`や`... file changed, ... insertion(+)`といったメッセージが表示された。

「じゃあ、`ls`コマンドでファイル一覧を見てみて」

「あ！`feature.txt`がいる！`main`ブランチにやってきた！」

`git log`を叩くと、そこには`add-new-feature`ブランチで作ったコミットもしっかりと歴史に刻まれていた。二つの世界は、見事に一つになったのだ。

### お片付けと、次なる冒険

「パラレルワールドでの冒険が無事に終わって、本編に統合されたら、そのブランチはもう役割を終えたことになるわ。取っておいてもいいけど、増えすぎるとごちゃごちゃするから、消してしまうのが一般的よ」

```
git branch -d <削除したいブランチ名>

```

「`-d`は`--delete`の略ね。さあ、`git branch -d add-new-feature`で、お片付けしてみて」

`Deleted branch add-new-feature.`というメッセージが表示され、ブランチは綺麗に消去された。

「よし。これで一連の流れは完璧ね。でも、千紘。今のは、あなた一人が別の世界で冒険して、それを元の世界に持ち帰る、っていう単純な話だった」

「うん」

「でも、もし…あなたがパラレルワールドで冒険している間に、元の世界でも、誰かが歴史を書き換えていたら？しかも、それが偶然にも、あなたが書き換えたのと同じ場所だったら…？」

「え…どうなるの？」

「それが**コンフリクト**よ。Gitが『どっちの歴史を信じればいいか分からない！』ってパニックを起こしちゃうの。でも、大丈夫。それも冒険の一部。解決する方法を、今から体験してみましょう」

### コンフリクトの発生と解決

「じゃあ、わざとコンフリクトを起こしてみるわよ。まず、`main`ブランチで`README.md`を編集して、『このプロジェクトは千紘の冒険の書です。』って一行だけ書いて、コミットしてみて」

千紘は言われた通りにファイルを編集し、`add`して`commit`した。

「OK。じゃあ次に、`fix-typo`っていう新しいブランチを作って、そっちに移動して」

`git branch fix-typo`、`git switch fix-typo`。千紘はスムーズにパラレルワールドへ移動した。

「その新しい世界で、さっき書いた`README.md`の『千紘の』を、『**偉大なる**千紘の』に書き換えてコミットしてくれる？」

「えへへ、照れるじゃん！…よし、コミットしたよ！」

「ありがとう。…さて、ここからが本番。あなたが`fix-typo`の世界で作業している間に、`main`の世界でも歴史が進んだ、という状況を再現するわ。`main`ブランチに戻って」

`git switch main`で元の世界に戻った千紘に、私は非情な指示を出す。

「`main`ブランチの`README.md`を、今度は『このプロジェクトは、**駆け出し冒険者**・千紘の冒険の書です。』に書き換えて、コミットして」

「え！？`偉大なる`じゃなくて！？…まあ、いっか。よし、こっちもコミットしたよ」

「これで準備は整ったわ。今の状況を整理するとこう」

- `main`ブランチでは、「駆け出し冒険者」という修正が加えられた。
- `fix-typo`ブランチでは、「偉大なる」という修正が加えられた。
- どちらも、同じファイルの、同じ行を変更している。

「さあ、千紘。`main`ブランチにいるその状態で、`fix-typo`ブランチをマージしてみて。何が起こるか…」

千紘がゴクリと唾を飲んで`git merge fix-typo`を実行すると、ターミナルは今まで見たことのない、不穏なメッセージを返した。

```
Auto-merging README.md
CONFLICT (content): Merge conflict in README.md
Automatic merge failed; fix conflicts and then commit the result.

```

「わー！なんか怒られた！CONFLICTって書いてある！」

「ええ、これがコンフリクトよ。Gitの悲鳴だと思って。じゃあ、パニックになっている`README.md`の中身を見てみましょうか」

ファイルを開くと、そこには奇妙な記号が書き加えられていた。

```
<<<<<<< HEAD
このプロジェクトは、駆け出し冒険者・千紘の冒険の書です。
=======
このプロジェクトは、偉大なる千紘の冒険の書です。
>>>>>>> fix-typo

```

「何これ！？」

「これがコンフリクトの目印よ」

- `<<<<<<< HEAD`から`=======`までが、今いるブランチ（`main`）での変更内容。
- `=======`から`>>>>>>> fix-typo`までが、マージしようとしたブランチ（`fix-typo`）での変更内容。

「Gitは『どっちを採用すればいいか分からないから、君が判断して、正しい形にファイルを修正してくれ』って言ってるの。さあ、この記号を全部消して、千紘が思う一番いい形にファイルを編集してみて。例えば、『このプロジェクトは、偉大なる駆け出し冒険者・千紘の冒険の書です。』とかね」

千紘は少し悩んでから、ファイルを綺麗に修正した。

「よし、できたよ！」

「素晴らしいわ。じゃあ、最後の仕上げよ。修正したファイルを、もう一度`add`して、`commit`するの」

```
git add README.md
git commit

```

「今回は`-m`を付けずに`commit`してみて。そうすると、エディタが立ち上がって、Gitが用意した『マージのコンフリクトを解決しました』っていうデフォルトメッセージが表示されるから、それをそのまま保存すればOKよ」

千紘がコミットを完了させると、コンフリクトは無事に解決され、二つの歴史は正しく一つに統合された。

「やったー！できた！コンフリクト、最初はびっくりしたけど、解決できると超スッキリするじゃん！」

「ええ。これであなたも、一人前の冒険者ね。ローカルでの作業は、もう何も怖くないはずよ。じゃあ、いよいよ次の章では、このブランチの魔法をGitHubと組み合わせた、本当のチーム開発の世界へご案内するわ」

# 第4章：GitHubを活用したチーム開発フロー

## 第1部：はじめまして、プルリクエスト

「コンフリクトも解決できるようになったし、もう私に敵はいないじゃん！」

「ふふ、頼もしい限りね。でも、本当のチーム開発は、もっと安全で、もっと対話的な方法で行われるのよ」

私は千紘のGitHubリポジトリのページを開き、「Settings」タブをクリックした。そして、`main`ブランチを『保護』する設定を有効にする。

「これは…？」

「今、私がこのリポジトリの`main`ブランチに、直接`push`できないように魔法をかけたわ。試しに、何かローカルの`main`ブランチで変更を加えて、`push`してみてくれる？」

千紘が試してみると、ターミナルは無情にも`! [remote rejected]`というエラーを返した。

「うわ！また怒られた！なんで！？」

「実際のチーム開発では、`main`ブランチは『常に安定して動く、製品版の設計図』として、とても大事に扱われるの。未完成の機能や、まだ誰もチェックしていないコードが、うっかり混ざってしまうのを防ぐためよ」

「じゃあ、どうやって私が作った新機能を`main`に入れるのさ！？」

「そこで登場するのが、GitHubが生んだ最高の発明、**プルリクエスト**よ」

### プルリクエストとは？：丁寧な『ご提案』

「プルリクエストは、英語だと**Pull Request**、略して**PR**ってよく呼ばれるわ。これは、文字通り『私のこの変更（ブランチ）を、あなたのブランチに**引き込んで（Pull）**もらえませんか？』と**お願い（Request）**する機能なの」

「お願い…？」

「そう。いきなり`merge`するんじゃなくて、『こんな機能を作ってみたんですけど、どうでしょうか？内容を確認してもらって、問題なければ、`main`ブランチに取り込んでもらえませんか？』って、レビューを依頼するためのものなのよ。いわば、**変更内容のプレゼンテーション**ね」

### プルリクエストを送ってみよう

「じゃあ、早速やってみましょう。さっきコンフリクトを解決した`fix-typo`ブランチはもう消したかしら？まだなら、`git branch -d fix-typo`で消しておいて」

「うん、消したよ！」

「じゃあ、新しいブランチ`add-chapter1`を作って、`chapter1.txt`というファイルを追加して、何か内容を書いてコミットしてみて」

千紘は手慣れた様子でブランチを作り、ファイルを追加してコミットした。

「よし、できたよ！」

「OK。今、その`add-chapter1`ブランチは、まだ千紘のPCの中にしかないわ。プルリクエストを出すには、まずこのブランチをGitHubに`push`して、他の人が見れるようにする必要があるの」

```
git push origin <ブランチ名>

```

「さあ、`git push origin add-chapter1`を実行してみて」

千紘がコマンドを実行すると、ローカルのブランチがGitHubにアップロードされた。

「じゃあ、GitHubのリポジトリページをブラウザで見てみて。何か変化があるはずよ」

千紘がページを更新すると、`add-chapter1 had recent pushes ...`というメッセージと共に、緑色の**[Compare & pull request]**ボタンが表示されていた。

「わ！なんかボタンが出てる！」

「ええ。GitHubが『新しいブランチがpushされたみたいだけど、プルリクエストを作るかい？』って気を利かせてくれてるの。さあ、そのボタンを押してみて」

ボタンを押すと、プルリクエストの作成画面に移動した。そこには、タイトルと説明を書き込むためのテキストボックスが用意されている。

「ここがプレゼン会場よ。タイトルには『第一章を追加』みたいに、変更内容を分かりやすく書くの。そして、下の大きなテキストボックスには、『なぜこの変更をしたのか』『どんな機能を追加したのか』といった、詳しい説明を書くのよ。レビューしてくれる人が、変更の意図を理解しやすくなるようにね」

千horaが説明を書き終えると、私は右側のサイドバーにある「Reviewers」という項目を指さした。

「そして、ここで『この人に見てもらいたい』っていうレビュー担当者を指名できるの。今回は、私を指名してみて」

千紘が私をレビュアーに設定し、最後に緑色の**[Create pull request]**ボタンを押した。これで、彼女の『ご提案』が、正式に提出された。

---

### レビューとコミュニケーション

プルリクエストが作成されると、私（レビュアー）に通知が届く。私はそのプルリクエストのページを開いた。

「今、私はレビュアーとして、千紘の提案を見ているわ。この画面では、どんなファイルが変更されたのか、具体的にどの行が追加・削除されたのかが一目で分かるの」

私は「Files changed」タブを開き、追加された`chapter1.txt`の内容に、あえて一つコメントを残してみることにした。コードの特定の行の横にある「＋」ボタンを押して、コメントを入力する。

`「すごくいいね！ただ、ここの表現はもう少し具体的に書いたほうが、読者が分かりやすいかもしれないわ」`

そして、[Start a review]ボタンを押して、コメントを送信した。

「千紘、プルリクエストのページを更新してみて」

千horaが更新すると、私からのコメントが表示されている。

「わ！澪からコメントが来てる！」

「そう。こうやって、コードについて具体的な場所を指しながら、チームで議論をすることができるの。もし私が『ここ、バグがあるから直して』って指摘したら、千紘はどうする？」

「えっと…また自分のPCで直して、コミットして…」

「そう！そして、もう一度`git push origin add-chapter1`をするの。同じブランチにpushすれば、このプルリクエストに自動的にその修正が追加されるわ。さあ、私の指摘を受けて、何か少しだけファイルを修正して、もう一度pushしてみて」

千紘は言われた通りにファイルを修正し、コミットして、再度`push`した。すると、GitHubのプルリクエスト画面が自動で更新され、新しいコミットが追加されたことが表示された。

「すごい！自動で反映された！」

「ええ。こうしてレビューと修正のサイクルを繰り返して、コードの品質を高めていくの。…うん、修正された内容、とても良くなったわ。これなら問題ない。じゃあ、私がこの提案を**承認（Approve）**するわね」

私は[Review changes]ボタンから「Approve」を選択し、送信した。プルリクエストのステータスに、緑色のチェックマークが付いた。

「承認された！やったー！」

「これで、この変更は`main`ブランチに取り込んでも安全だ、というお墨付きがもらえたわけ。じゃあ、最後に緑色の**[Merge pull request]**ボタンを押してみて。いよいよ、あなたの冒険が、公式の歴史になる瞬間よ」

千紘がボタンを押すと、`add-chapter1`ブランチの変更が、無事に`main`ブランチにマージされた。

「これが、GitHubを使ったチーム開発の基本的な流れよ。どう？いきなり`push`するより、ずっと安全で丁寧な感じがしない？」

「うん！超する！なんか、ちゃんと『お仕事』してるって感じがするじゃん！」

千紘は、また一つ、プロの冒険者への階段を上ったのだった。

## 第2部：世界への貢献『フォーク』と『プルリクエスト』

「プルリクエスト、超すごいじゃん！これなら、みんなで安全に開発できるね！」

千紘は、チーム開発の洗練された流れにすっかり感心していた。

「ええ。でもね、千紘。今やったのは、千紘が『このプロジェクトの正式なメンバー』だったからできることなの」

「え、そうなの？」

「そうよ。世の中には、世界中の誰もが自由に参加できる**オープンソースプロジェクト**というものがたくさんあるわ。そういうプロジェクトでは、誰でも彼でもメンバーに追加するわけにはいかないでしょう？」

「確かに！知らない人がいきなりブランチ作ったりしたら、めちゃくちゃになっちゃうもんね」

「その通り。じゃあ、メンバーじゃないプロジェクトに、どうやって貢献するのか。そのための仕組みが**フォーク（Fork）**よ」

### フォークとは？：自分だけの研究室を持つこと

「フォークはね、他人のリモートリポジトリを、自分のGitHubアカウントに丸ごとコピーしてくる機能よ。文字通り、食器のフォークのように『突き刺して、自分のところに持ってくる』イメージね」

「ふむふむ。`clone`とは違うの？」

「いい質問ね。`clone`は、リモートリポジトリを**自分のPC（ローカル）に持ってくること。フォークは、他人のリモートリポジトリ**を、自分の**リモートリポジトリ**としてコピーすること。段階が一つ違うの」

私は一枚の図を描いて見せた。

1. **フォーク**: 他人の公開リポジトリ（大図書館の本）を、自分のGitHub（自分専用の図書館分室）に丸ごとコピーする。
2. **クローン**: 自分の分室に持ってきた本を、自分のPC（自分の机）に持ってくる。
3. **開発**: 自分の机で、心ゆくまで本に書き込み（修正）をする。
4. **プッシュ**: 書き込んだ内容を、自分の分室の本に反映させる。
5. **プルリクエスト**: 自分の分室から、大図書館の司書（元の開発者）に「こんな修正案を考えたのですが、原本にも取り入れてもらえませんか？」と提案する。

「なるほど！いきなり大図書館で作業するんじゃなくて、まず自分専用の研究室にコピーを持ってきて、そこで完璧に仕上げてから提案するって感じだね！」

「まさにその通りよ。じゃあ、やってみましょうか」

### オープンソースプロジェクトに参加する流れ

「ここに、私が作ったオープンソースのサンプルプロジェクトがあるわ」

私は千紘に`github.com/mio-example/open-project`というURLを送った。ページを開くと、千紘のリポジトリとは違い、右上の方に**[Fork]**というボタンがある。

「そのボタンを押してみて。自分のアカウントにフォークを作成するの」

千紘がボタンを押すと、少し待った後、`chihiro-account/open-project`というリポジトリに画面が切り替わった。URLも自分のアカウントのものになっている。

「わ！私のリポジトリになった！でも、`forked from mio-example/open-project`って書いてある！」

「それが、このリポジトリの出所を示している証拠よ。じゃあ、次にこの**フォークしてきた自分のリポジトリ**を、`git clone`でローカルに持ってきて」

千紘は`git clone`コマンドで、`chihiro-account/open-project`をローカルに複製した。

「OK。じゃあ、ここでリモートリポジトリの登録情報を確認してみましょうか。`git remote -v`っていうコマンドを打ってみて」

```
origin  https://github.com/chihiro-account/open-project.git (fetch)
origin  https://github.com/chihiro-account/open-project.git (push)

```

「`origin`が、ちゃんと自分のリポジトリになってるね！」

「ええ。でも、これだけだと、大元である私のリポジトリの更新情報が分からなくなってしまう。だから、『このリポジトリの元になった場所』も登録しておくのが一般的なの。その慣習として、大元のリポジトリは**upstream（上流）**という名前で登録するわ」

```
git remote add upstream <大元のリポジトリURL>

```

「さあ、`git remote add upstream https://github.com/mio-example/open-project.git` を実行して、もう一度`git remote -v`で確認してみて」

実行後、ターミナルにはこう表示された。

```
origin    https://github.com/chihiro-account/open-project.git (fetch)
origin    https://github.com/chihiro-account/open-project.git (push)
upstream  https://github.com/mio-example/open-project.git (fetch)
upstream  https://github.com/mio-example/open-project.git (push)

```

「本当だ！`origin`と`upstream`、二つ登録された！」

「これで準備万端ね。あとは、今まで通り。新しいブランチを作って、何か修正を加えて、自分のリポジトリ（`origin`）に`push`して。そして、GitHubのページから、**自分のフォークリポジトリ**から**大元のリポジトリ**へ向けて、プルリクエストを送るの」

千紘は一連の流れをスムーズにこなし、見事にプルリクエストを作成した。

「できた！これ、世界中のプロジェクトに、誰でも参加できるってことだよね？超すごいじゃん！」

「ええ、そうよ。これがオープンソースの力。そして、GitとGitHubが、その文化を支える強力な土台になっているの。…さて、基本的な共同作業の流れはこれでマスターね。最終章では、日々の作業をもっと快適にするための、便利な魔法をいくつか教えてあげる」

# 第5章：もっとGitを使いこなすための便利な魔法

## 第1部：過去を自在に書き換える呪文

「ふぅー、GitとGitHub、完全に理解した！って感じだよ！」

「ふふ、素晴らしいわ。でも、冒険にはトラブルがつきもの。時には、唱えた魔法をキャンセルしたり、ちょっとだけ修正したりしたくなることもあるでしょう？最終章では、そんな『ちょっと困った』を解決する、便利な呪文を教えてあげる」

「おー！気になるじゃん！」

### やっちゃった！を無かったことにする

### 直前のコミットを修正する： `git commit --amend`

「じゃあ、まず最初のシチュエーション。何か作業をして、`git commit`した直後に、『あ！コミットメッセージにタイプミスが！』って気づいた時。あなたならどうする？」

「えーっと…もう一回コミットし直す？」

「それも間違いではないけど、同じような修正のコミットが二つ並ぶのは、歴史がごちゃごちゃするわよね。そんな時、**直前のコミットに限り**、修正を上書きできる魔法があるの。それが`--amend`よ」

```
git commit --amend

```

「例えば、`README.md`を少し編集して、`git commit -m "Add documentt"`みたいに、わざと間違えてコミットしてみて」

千紘がコミットした後、`git log`で確認すると、確かに間違ったメッセージのコミットが記録されている。

「うわ、本当だ。恥ずかしい…」

「じゃあ、ここで`git commit --amend`を実行してみて。`-m`は付けずにね」

千紘がコマンドを叩くと、エディタが立ち上がり、先ほどのコミットメッセージが表示された。

「ここで正しいメッセージに書き換えて、保存して終了すればOKよ」

千紘がメッセージを修正すると、`git log`で見た歴史が、綺麗に正しいものに書き換わっていた。

「すごい！さっきの間違いが、最初から無かったことになってる！」

「ええ。メッセージだけじゃなく、`add`し忘れたファイルを`add`してから`--amend`すれば、直前のコミットにファイルを追加することもできる。ただし、**絶対にpush済みのコミットには使わないこと**。歴史を無理やり書き換える強力な魔法だから、他の人の歴史と食い違って、大混乱を招くことになるわ」

### コミットを取り消して過去に戻る： `git reset`

「じゃあ、次はもっと深刻なケース。『このコミット、機能ごと丸っと間違いだった！』って時。冒険の書から、ページごと破り捨てたくなる時ね。それを実現するのが`reset`よ」

```
git reset --hard <戻りたいコミットのID>

```

「`git log`で表示される、`commit`の横にある長い文字列がコミットIDよ。最初の7文字くらいを指定すれば大丈夫。でも、この`--hard`オプションは、ファイルへの変更もろとも、**完全に消し去る**超危険な魔法。一度やったら、もう元には戻せない。だから、使う時は本当に慎重にね」

「こ、こわい…」

「そう。だから、`push`済みの歴史には絶対に使ってはいけないし、ローカルでも、もっと安全な方法があるの」

### 安全にコミットを打ち消す： `git revert`

「ページを破り捨てるんじゃなくて、『前のページの記述は間違いでした』って、**新しいページに訂正文を書く**のが、一番安全で誠実な方法だと思わない？」

「あ、なるほど！」

「それをやるのが`revert`よ。『打ち消す』っていう意味ね。これは、指定したコミットの変更内容を、そっくりそのまま打ち消す**新しいコミット**を作ってくれるの」

```
git revert <打ち消したいコミットのID>

```

「`reset`と違って歴史を書き換えないから、`push`済みのコミットを安全に打ち消すことができる。チーム開発で間違いを修正する時は、基本的にこちらを使うのがマナーよ」

「なるほどー！歴史を消すんじゃなくて、歴史で上書きするんだね！それなら安心じゃん！」

「ええ。過去は消せないけど、過ちを正すことはできる。Gitも人生も、同じってことね」

## 第2部：魔法のポケット『スタッシュ』と旅の終わり

「過去を修正する魔法かー。なんか、すごいことできるようになった気分だよ！」

「ええ。でも、冒険の途中で、もっと現実的な問題に直面することもあるわ。例えば…」

私は千紘に、とある状況を想像させた。

「千紘は今、`new-feature`ブランチで、新しい魔法の開発に没頭している。ファイルAもファイルBも中途半端に書き換えていて、まだコミットできる状態じゃないわ。そんな時、私から緊急連絡。『千紘！`main`ブランチに、今すぐ直さないといけない致命的なバグが見つかったわ！』…さあ、どうする？」

「え！？で、でも、この作業、まだ中途半端だし、コミットできないよ！ブランチも切り替えられないじゃん！うわー、どうしよう！」

慌てる千紘を見て、私は静かに微笑んだ。

「そんな時のための、とっておきの魔法があるのよ。それが**スタッシュ（Stash）**」

### 作業を一時的に隠す魔法： `git stash`

「スタッシュは『隠しておく』『しまい込む』っていう意味。まだコミットしたくないけど、ちょっと脇に置いておきたい作業を、まるごと魔法のポケットに一時退避させてくれる機能よ」

```
git stash

```

「コマンドはこれだけ。これを実行すると、今ある変更が全部隠されて、ワーキングディレクトリが『最後のコミット』の状態まで綺麗になるの。まるで、散らかった机の上を、魔法の布で一瞬で片付けるようなものね」

「なにそれ超便利じゃん！」

「じゃあ、試してみましょうか。何か適当なファイルを編集して、`git status`で変更がある状態にしてみて」

千紘がファイルを変更すると、`git status`は真っ赤な`modified`の文字を返した。

「OK。じゃあ、ここで`git stash`を実行してみて」

千紘がコマンドを叩くと、`Saved working directory and index state ...`というメッセージが表示された。そして、もう一度`git status`を叩くと…

`nothing to commit, working tree clean`

「うそ！さっきまで赤かったのに！きれいさっぱり消えちゃった！」

「ええ。これで心置きなく、緊急のバグ修正に移れるわ。`git switch main`でブランチを切り替えて、バグを直して、コミットして…」

（バグ修正作業を終えた、という体で…）

「さて、緊急の任務は終わったわ。自分の`new-feature`ブランチに戻って、作業の続きをしましょうか」

千紘が`git switch new-feature`でブランチを戻す。机の上は、まだ綺麗なままだ。

「じゃあ、魔法のポケットから、さっき隠した作業を元に戻しましょう。その呪文がこれ」

```
git stash pop

```

千紘がコマンドを実行すると、`On branch new-feature ... Changes not staged for commit: ...`といったメッセージと共に、先ほど消えたはずの変更が、そっくりそのまま元通りに現れた。

「うわーーーー！戻ってきた！私の書きかけのコードが！すごい！スタッシュ最強じゃん！」

「ふふ、でしょ？ちなみに、隠した作業の一覧は`git stash list`で見れるし、`pop`じゃなくて`apply`を使えば、ポケットにデータを残したまま復元することもできるわ。これで、どんな緊急事態が起きても、もう慌てる必要はないわね」

---

### 旅の終わりに

「…と、いうわけで。GitとGitHubを巡る冒険の旅は、これでおしまい。どうだった、千紘？」

私たちは、いつものカフェで、PCを閉じてコーヒーを飲んでいた。

「超、超、超面白かった！最初は黒い画面に文字打つだけって、何が楽しいんだろって思ってたけど、`commit`で歴史を刻んだり、`branch`でパラレルワールド作ったり、`pull request`で澪と会話したり…なんか、ただのツールじゃないんだなって思ったよ」

「ええ、その通りよ。これは、思考を整理し、仲間と協力し、そして世界中の知識と繋がるための、現代の冒-険者にとっての『読み書き』みたいなものなの」

「うん！私、この冒険の書、もっともっと書き進めていきたいな！澪、また分からないことがあったら、教えてくれる？」

「もちろんよ。いつでも声をかけて。私たちの冒険は、まだ始まったばかりなんだから」

私たちはカップを合わせ、未来の冒険に思いを馳せた。黒い画面の向こうに広がる、無限の世界。そこでは、きっとたくさんの失敗と、それを乗り越えるための発見が待っている。

千紘が、そしてこれを読んでくれたあなたが、GitとGitHubという強力な羅針盤を手に、素晴らしい冒険の旅を続けられることを、心から願っているわ。