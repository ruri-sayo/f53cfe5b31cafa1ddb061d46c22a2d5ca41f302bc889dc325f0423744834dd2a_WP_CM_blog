---
layout: post
title: コンピュータの構造（ハードウェア編）
date:   2025-11-7 19:12:00 +0900
categories: [備忘録, 技術]
description: PCの基礎（ハードウェア編）です。
---

# はじめに

この記事では、PC（パソコン）を動かしている「ハードウェア」に焦点を当てて解説する。「ハードウェア」とは、PCを構成する目に見える「部品」や「機器」のことである。

PCの仕組みを理解する上で、ハードウェアの知識はすべての基礎となる。この記事を読み、あなたのPCがどのような部品で動いているのか、その概要を掴むことができるだろう。

# PCを構成する主なパーツ（概要）

まずは、PCの「中身」を構成する中心的なパーツについて、その役割を最低限解説する。
最低限の要点を掴んだ解説を心がけたので、時間が無いニキ/ネキはこの概要だけでも読むことをおすすめする。

## CPU（シーピーユー）：PCの「脳」

PCの性能を左右する最も大事なパーツの一つ。ユーザーの操作やプログラムの指示に基づき、「計算」や「処理」を実行する。

## メモリ（RAM）：作業を行う「机」

CPUが処理を行うために、データやプログラムを一時的に置いておく場所。電源を切るとデータが消える（揮発性）。

## ストレージ（記憶装置）：データをしまう「本棚」

OS、アプリ、作成したファイルなどを長期間保存する場所。電源を切ってもデータは消えない（不揮発性）。

## GPU（ジーピーユー）：映像・画像処理の「専門家」

主に「グラフィック（映像や画像）」の処理を専門に行うパーツ。ゲームや動画編集、AI計算で活躍する。通称「グラボ」。

## マザーボード：パーツたちを繋ぐ「基盤」

CPUやメモリなど、PCの主要パーツをすべて接続するための大きな電子基板。各パーツが連携するための「土台」である。

## 電源ユニット：PCの「心臓」

PCのすべてのパーツに電力を供給する装置。PC全体の安定性を支える、縁の下の力持ちである。

## CPUクーラー：CPUを冷やす「冷却装置」

「脳」であるCPUは、活発に働くと非常に高温になるため、その熱を冷まし、安定動作をさせるために必須のパーツ。

## PCケース：すべてを収める「体」と「骨格」

これらのパーツをすべてまとめて収め、保護するための「箱」。デザインと冷却性能（エアフロー）が重要となる。

# 各パーツの詳細な解説

ここからは、詳細な解説をする。
普通に、自作PCが組めるぐらいの解説を心がけた。

## CPU (Central Processing Unit)

「中央演算処理装置」とも呼ばれる。PCの「脳」として、あらゆる計算（演算）と制御を担う。内部は、計算を行う「ALU（算術論理演算装置）」や、命令を解釈し実行する「制御装置」、高速な一時記憶「キャッシュメモリ」などで構成される。

### **性能の目安：コア数とクロック周波数**

1. **コア数：** CPU内部にある「作業員」の数。コア数が多いほど、複数の作業を同時に（並列に）処理するのが得意である。
2. **クロック周波数 (GHz)：** 「作業員」一人ひとりの「作業スピード」。この数値が高いほど、一つの作業を素早く終えることができる。

### **主なメーカー**

Intel（Core i/Ultra）、AMD（Ryzen）、Apple（Mシリーズ）の3社が市場を占めている。

### **CPUアーキテクチャ：CISCとRISC**

CPUが理解できる命令の「設計思想」によって、大きく2つのアーキテクチャに分類される。

1. **CISC (Complex Instruction Set Computer) - 複雑命令セットコンピュータ**
    - **思想:** 一つの命令で、なるべく複雑な処理（例：「メモリAからデータを読み出し、それにBを足し、結果をメモリCに書き戻す」）を実行できるようにする。
    - **特徴:**
        - **メリット:** 命令の種類が多く高機能なため、プログラマ（やコンパイラ）は少ない命令数でプログラムを記述できる（コード密度が高い）。
        - **デメリット:** 命令が複雑なため、命令を解釈する「デコーダ」が非常に複雑化する。また、各命令の実行時間が変動しやすく、高速化（パイプライン処理）の妨げになりやすい。
    - **代表例:** Intel, AMDが採用する「x86 / x64」アーキテクチャ。PC市場で長らく主流であった。
2. **RISC (Reduced Instruction Set Computer) - 縮小命令セットコンピュータ**
    - **思想:** 命令セットを「ロード（メモリ→CPU）」「ストア（CPU→メモリ）」「演算」といった単純な処理に限定し、命令の長さや形式を統一する。
    - **特徴:**
        - **メリット:** 命令が単純で固定長なため、デコーダが単純で済む。パイプライン処理（命令を流れ作業で高速実行する技術）との相性が非常に良く、高効率な実行が可能。消費電力を抑えやすい。
        - **デメリット:** 複雑な処理は、単純な命令の組み合わせで実現するため、CISCに比べてプログラムの総命令数（コード密度）は大きくなりがち。
    - **代表例:** 「ARM」アーキテクチャ（Apple Mシリーズ、ほぼ全てのスマートフォン、組み込み機器）、MIPS、PowerPC（旧Mac）。

### **現代のアーキテクチャ**

現在、この分類は必ずしも明確ではない。CISCであるはずのx86系CPU（Intel, AMD）も、内部では複雑なCISC命令を単純な「マイクロオペレーション」と呼ばれるRISC的な命令に分解・変換してから実行する、ハイブリッドな方式を採っている。
一方で、AppleがMacに搭載したMシリーズ（ARMベースのRISC）が、従来のCISC系CPUを凌駕する高い電力効率と性能を示したことで、PC分野においてもRISCアーキテクチャが再び強く注目されている。

## メモリ (RAM - Random Access Memory)

「作業机」の比喩の通り、CPUが直接データを読み書きする場所である。
ストレージは低速だが大容量（本棚）、CPUは超高速（脳）であるため、その中間で高速に動作するメモリ（机）が必要となる。

### **メモリの特徴：揮発性（きはつせい）**

最大の特徴は「揮発性」であることだ。これは、**PCの電源を切ると、メモリに置いてあったデータはすべて消えてしまう** ことを意味する。
現在主流のDRAM (Dynamic RAM) は、コンデンサに電荷を蓄えることで「1」、蓄えないことで「0」を記憶する。コンデンサは自然放電するため、常に「リフレッシュ」と呼ばれる再充電動作が必要であり、これが電源を切るとデータが消える理由である。

### **メモリの規格（DDR）**

「DDR4」や「DDR5」といった「世代（規格）」がある。世代が異になると互換性はないため、マザーボードが対応する規格のメモリを使用する必要がある。

## ストレージ（記憶装置）

データを長期間保存する「不揮発性」の記憶装置。主に「HDD」と「SSD」の2種類がある。

### **HDD (ハードディスクドライブ)**

磁性体を塗布した円盤（プラッタ）を高速で回転させ、そこに「磁気ヘッド」を近づけてデータを読み書きする。

- **構造：**
    - **プラッタ:** データを記録する円盤。アルミニウムやガラス製。
    - **スピンドルモーター:** プラッタを高速回転させるモーター（例：5400rpm, 7200rpm）。
    - **磁気ヘッド:** プラッタの表面に磁気パターンを書き込み、または読み取る。
    - **アクチュエータアーム:** 磁気ヘッドをプラッタ上の目的のトラック（同心円状の記録領域）まで精密に移動させる腕。
- **特徴：**
    - **メリット:** 容量あたりの単価が非常に安い。数TB（テラバイト）の大容量が一般的。
    - **デメリット:** 物理的に駆動する部品（モーターとアーム）があるため、動作音がし、衝撃に弱い。SSDと比べて読み書き速度が桁違いに遅い。

### **SSD (ソリッドステートドライブ)**

HDDのような物理的な駆動部品がなく、「NAND型フラッシュメモリ」という半導体にデータを電気的に記録する。

- **構造 (NANDフラッシュ)：**
データを「セル」と呼ばれる最小単位に保存する。セルは「フローティングゲート（浮遊ゲート）」を持つ特殊なトランジスタで構成される。このフローティングゲートに電子を注入する（「0」）か、引き抜く（「1」）かでデータを記録する。
[NAND型フラッシュメモリのセル構造の図]
- **セルの種類：** 1セルに何ビットの情報を記録するかで種類が分かれる。
    - **SLC (Single):** 1セル 1ビット。高速・高耐久だが高価。
    - **MLC (Multi):** 1セル 2ビット。
    - **TLC (Triple):** 1セル 3ビット。現在主流。
    - **QLC (Quad):** 1セル 4ビット。大容量・低価格だが、速度と耐久性はTLCに劣る。
- **メリット：** 読み書きが非常に高速。PCの起動やソフトの立ち上がりが劇的に早くなる。動作音がしない。衝撃に強い。
- **デメリット：** 容量あたりの単価はHDDより高価。
- **データの「不安定さ」と言われる理由（弱点）：**
    1. **書き込み/消去回数の上限:** データを書き込む（電子を注入する）際、フローティングゲートを絶縁する「トンネル酸化膜」が徐々に劣化する。このため、セルごとに「書き換え可能回数」に上限（寿命）が存在する。
    2. **データの保持期間:** フローティングゲートに蓄えられた電子は、電源が無くても保持されるが、永遠ではない。時間経過と共に（特に高温環境下では）徐々に電子が漏れ出し、データが化ける（消える）可能性がある（データリテンション特性）。
    3. **ブロック単位の消去:** NANDフラッシュは、「ページ」単位（例: 16KB）で書き込むが、消去はより大きな「ブロック」単位（例: 16MB）で行う必要がある。データを1ページだけ更新したい場合でも、一度ブロック全体を読み出し、該当ページ以外を保持したままブロックを丸ごと消去し、更新データを含めて再度書き込むという非効率な動作（Write Amplification: 書き込み増幅）が発生する。

これらの弱点は、SSD内部の「コントローラ」と呼ばれる高性能なチップが、「ウェアレベリング（書き込みを平準化し、特定のセルだけが劣化するのを防ぐ）」「エラー訂正（ECC）」「ガベージコレクション（不要データ整理）」といった複雑な処理を行うことで、ユーザーが意識しなくても長期間安定して使えるように管理されている。

## GPU (Graphics Processing Unit)

「画像処理装置」とも呼ばれる。元々は3Dグラフィックスなどの描画処理を専門に行うパーツだったが、その高い「並列処理能力」が注目され、AIのディープラーニングや科学技術計算にも転用されている（GPGPU）。

### **3Dグラフィックス処理と行列演算**

GPUの並列処理能力は、3Dグラフィックスの描画プロセスと密接に関連している。

1. **ポリゴン処理:**
PCゲームなどで表示される3Dオブジェクト（キャラクターや背景）は、「ポリゴン」と呼ばれる小さな多角形（主に三角形）の集合体として表現される。
2. **座標変換と行列:**
1秒間に60回（60fps）画面を更新する場合、GPUは、その瞬間のカメラ（視点）位置やオブジェクトの動きに基づき、何百万ものポリゴンの「頂点」が画面上のどこに表示されるべきかを計算し直す必要がある。
この「移動」「回転」「拡大・縮小」「遠近法の適用（パースペクティブ変換）」といった計算は、数学的には「行列（マトリクス）演算」として非常に効率的に表現できる。
[3Dグラフィックスのレンダリングパイプラインの図]
3. **並列処理の必要性:**
GPUは、これら「何百万個の頂点」に対する「単純な行列演算」を、一斉に、かつ同時に（並列に）実行するために、数千個という膨大な数の計算ユニット（シェーダーコア）を搭載している。CPUのように高性能なコア数個で順番に処理するのではなく、単純な計算ユニットを大量に用意することで、グラフィックス処理に必要な膨大な計算量をクリアしている。

**AI（ディープラーニング）への応用**
このGPUのアーキテクチャが、AI（ディープラーニング）の計算に驚くほど適していた。

AIのディープラーニング（特にニューラルネットワーク）の計算は、入力データ（画像やテキスト）がネットワークの「層（レイヤー）」を通過する際に、膨大な「行列（テンソル）の積和演算」を行う。
この計算の構造（大量のデータを対象に、比較的単純な積和演算を一斉に行う）が、GPUが3Dグラフィックス処理で行っていた「大量の行列演算」と数学的にほぼ同一であった。

結果として、本来グラフィックス用であったGPUが、AIの計算（GPGPU）に転用され、その学習速度を劇的に向上させた。これが、現代のAIブームをハードウェアの側面から支える原動力となっている。（詳細はコラム4を参照）

## マザーボード

「M/B」と略される。PCの「土台」であり、すべてのパーツを接続し、相互に通信させるための「神経網」である。

- **バス (Bus):** パーツ間でデータをやり取りするための「共通の経路（道路）」。
- **I/O (Input/Output):** PCの「外」とデータをやり取りするためのインターフェース。背面のUSB、LAN（有線LAN）、オーディオ端子や、内部のSATA（ストレージ接続用）など、すべてがマザーボードに集約される。
- **チップセット (Chipset):**
マザーボード上の「交通整理役」。CPUと各パーツ（メモリ、GPU、ストレージ、USBなど）の間のデータ転送を制御・仲介する重要なチップである。
- **伝統的なアーキテクチャ (ノースブリッジ / サウスブリッジ):**
[ノースブリッジとサウスブリッジの役割を示すマザーボードのブロック図]
かつて、チップセットは役割の異なる2つのチップで構成されていた。
    1. **ノースブリッジ (Northbridge):** CPUに近い「北」に配置。CPU、メインメモリ、GPU（高速なAGPやPCI Expressバス）など、高速なデータ転送を必要とするパーツ間の仲介を担当した。
    2. **サウスブリッジ (Southbridge):** ノースブリッジから遠い「南」に配置。ストレージ(SATA/IDE)、USB、LAN、オーディオ、PCIバス（低速な拡張カード）など、比較的低速なI/Oデバイスの制御を担当した。
- **現代のアーキテクチャ (PCH - Platform Controller Hub):**
技術の進歩により、かつてノースブリッジが担当していたメモリコントローラや、GPUと接続するPCI Expressレーンは、CPU自体に内蔵されるようになった。
その結果、現在のIntelやAMDのプラットフォームでは、ノースブリッジはCPUに統合され、マザーボード上には「チップセット」（Intel PCHやAMD X/Bシリーズチップセット）と呼ばれる、かつてのサウスブリッジの役割を拡張した単一のチップが搭載される形態が主流となっている。

マザーボードの「規格」（ATX, MicroATXなど）はPCケースのサイズを決め、チップセットの種類は「対応するCPUの世代」「メモリの規格」「拡張性の高さ（PCIeレーン数やSATA/USBポート数）」などを決定する。

## 電源ユニット

「PSU (Power Supply Unit)」とも呼ばれる。家庭用のコンセントから来る「交流（AC）」の電気を、PCパーツが使える「直流（DC）」（+12V, +5V, +3.3Vなど）の電気に変換する。PC全体の安定性に直結するため、各パーツが必要とする総電力（W数）に対して、余裕を持った容量と信頼性の高い製品を選ぶことが重要である。

## CPUクーラー

CPUは高性能であるほど発熱量も大きくなるため、冷却が不可欠である。

- **空冷クーラー：** 金属のフィン（ヒートシンク）で熱を受け取り、ファン（扇風機）の風で熱を放出する、最も一般的なタイプ。
- **水冷クーラー：** 冷却液（クーラント）を循環させてCPUの熱をラジエーター（放熱器）まで運び、そこでファンを使って冷やすタイプ。より高い冷却性能が期待できる。

## PCケース

各パーツを収める「箱」。見た目のデザインも重要だが、パーツがしっかり収まるか（サイズ）、効率よく熱を排出できるか（エアフロー設計）、組み立てやすいか（メンテナンス性）なども、ケース選びの重要なポイントである。

PCはケースが100割。どんなに優れた性能を示す中身でも、外見がだめだと何もできない。
簡単に言えば、人間が顔面で、恋人を選ぶようなものである。どんなに優れたPCもケースがだめだとゴミ以下の産業廃棄物である。

## （コラム）PCと計算の仕組み（専門編）

### 1. 2進数と論理回路

現代のPCは、すべての情報を「0」と「1」の組み合わせ（2進数）で処理している。これは、電気の「ON（1）」と「OFF（0）」という単純な状態が、電子回路で最も扱いやすいためである。
この「ON/OFF」を制御するスイッチの役割を果たすのが「トランジスタ」である。CPU内部には、このトランジスタが数十億〜数百億個も詰め込まれている。
トランジスタを組み合わせることで、「論理演算」を行う「論理ゲート（Logic Gate）」が作られる。

[AND、OR、NOT、XORの論理ゲート記号と真理値表]

- **AND (論理積):** 両方の入力が「1」の時だけ、出力が「1」になる。
- **OR (論理和):** どちらか一方でも入力が「1」なら、出力が「1」になる。
- **NOT (否定):** 入力が「1」なら出力は「0」、入力が「0」なら出力は「1」になる。
- **XOR (排他的論理和):** 入力が「1」と「0」で異なるときだけ、出力が「1」になる。

### 2. 半加算器 (Half-Adder)

この論理ゲートを使い、2進数の計算機を作ることができる。まずは、2進数の1桁の足し算（`0+0`, `0+1`, `1+0`, `1+1`）を考える。

| 入力A | 入力B | 出力：和 (Sum) | 出力：桁上り (Carry) |
| --- | --- | --- | --- |
| 0 | 0 | 0 | 0 |
| 0 | 1 | 1 | 0 |
| 1 | 0 | 1 | 0 |
| 1 | 1 | 0 | 1 |

この真理値表（入力と出力のパターン表）を見ると、

- 「和 (Sum)」は、入力AとBが異なるときだけ「1」になる（XORゲートと同じ）。
- 「桁上り (Carry)」は、入力AとBが両方「1」のときだけ「1」になる（ANDゲートと同じ）。

この2つのゲートを組み合わせたものが「半加算器（Half-Adder）」である。
[半加算器の論理ゲート回路図]

### 3. 全加算器 (Full-Adder)

半加算器では、「下の桁からの桁上り」を考慮できない。例えば `1+1+1`（下の桁から1が繰り上がってきた場合）の計算ができない。
そこで、入力A、入力Bに加えて、「下の桁からの桁上り (Carry-in)」も入力できる「全加算器（Full-Adder）」が必要となる。

| 入力A | 入力B | 入力：C-in | 出力：和 (Sum) | 出力：C-out |
| --- | --- | --- | --- | --- |
| 0 | 0 | 0 | 0 | 0 |
| 0 | 0 | 1 | 1 | 0 |
| 0 | 1 | 0 | 1 | 0 |
| 0 | 1 | 1 | 0 | 1 |
| 1 | 0 | 0 | 1 | 0 |
| 1 | 0 | 1 | 0 | 1 |
| 1 | 1 | 0 | 0 | 1 |
| 1 | 1 | 1 | 1 | 1 |

全加算器は、半加算器2つとORゲート1つを組み合わせることで実現できる。
[全加算器の論理ゲート回路図]

そして、この全加算器を必要な桁数（例：64ビットCPUなら64個）だけ連結させる（前の桁のC-outを次の桁のC-inに繋ぐ）ことで、任意の桁数の足し算が可能になる。これがCPUの計算の基礎（ALUの一部）である。

### 4. GPUと並列処理：CUDAの衝撃

GPUは元々、3Dグラフィックスを描画するために「単純な計算（行列演算など）を、大量の画素（ピクセル）に対して同時に（並列に）行う」ことに特化した設計になっていた。
CPUが「少数の高性能な作業員（コア）」で複雑な処理を逐次的に行うのが得意なのに対し、GPUは「多数の（数千個の）そこそこな作業員（コア）」で単純な作業を一斉に行うのが得意である。

**CUDA (Compute Unified Device Architecture)**
NVIDIAが開発した、GPUを汎用的な並列計算（GPGPU）に利用するためのプラットフォームおよびプログラミングモデルである。
CUDAが登場する以前もGPGPUの試みはあったが、グラフィックス処理用の言語（シェーダー言語）を無理やり流用するなど、非常に難解であった。
CUDAは、C言語やC++、Python（ラッパー経由）といった汎用的な高級言語で、GPUの膨大な並列計算能力を引き出せるようにした点で画期的だった。

**AIとCUDA**
近年のAI（特にディープラーニング）は、ニューラルネットワークの計算、とりわけ「行列（テンソル）の積和演算」を膨大な回数行う必要がある。この計算の性質が、GPUの「単純な計算を大量に並列実行する」というアーキテクチャと奇跡的に合致した。（詳細は「GPU」セクションを参照）
NVIDIAは早くからこの分野に投資し、AI計算用のライブラリ（cuDNNなど）を充実させたため、AI開発＝CUDA（NVIDIA GPU）を使う、というエコシステムが確立され、現在のAIブームをハードウェア面で支える基盤となった。

### 5. FLOPS（フロップス）と『サマーウォーズ』

FLOPSは、CPUやGPUの計算能力を測る指標の一つで、「1秒間に何回の浮動小数点計算ができるか」を示す。浮動小数点計算とは、簡単に言えば「小数点の計算」のことである。

余談だが、2009年公開の映画『サマーウォーズ』に登場するスパコンの性能は「200TFLOPS（毎秒20京回の計算速度、という映画内設定）」とされていた。
ところが、2024〜2025年現在、市販されている最新のハイエンドGPU（例：NVIDIA RTX 5090）は、1枚で100 TFLOPSを超える性能を持つと予想される。
つまり、当時の映画で「とてつもない未来のスーパーコンピュータ」として描かれた性能を、わずか十数年で、家庭用のPCパーツ2〜3枚で超えてしまう可能性があるのだ。半導体の技術進歩の速さが伺えるエピソードである。