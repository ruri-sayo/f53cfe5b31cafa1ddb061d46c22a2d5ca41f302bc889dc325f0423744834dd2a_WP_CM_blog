<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>城上 更新情報ジェネレーター</title>
    <style>
        body {
            font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            max-width: 700px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            text-align: center;
            font-size: 1.5rem;
            color: #444;
            margin-bottom: 20px;
        }
        .card {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        .input-group {
            margin-bottom: 20px;
        }
        input[type="text"], input[type="date"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 16px;
            margin-bottom: 8px;
        }
        button {
            cursor: pointer;
            border: none;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        .add-btn {
            background-color: #e0e0e0;
            color: #333;
            padding: 5px 10px;
            font-size: 14px;
            width: 100%;
        }
        .add-btn:hover {
            background-color: #ccc;
        }
        .generate-btn {
            background-color: #2c3e50;
            color: #fff;
            padding: 12px;
            width: 100%;
            font-size: 18px;
            font-weight: bold;
        }
        .generate-btn:hover {
            background-color: #1a252f;
        }
        .result-area {
            margin-top: 20px;
        }
        textarea {
            width: 100%;
            height: 250px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: vertical;
            font-family: monospace;
            box-sizing: border-box;
        }
        .copy-btn {
            background-color: #27ae60;
            color: white;
            padding: 10px;
            width: 100%;
            font-size: 16px;
            margin-top: 10px;
        }
        .copy-btn:hover {
            background-color: #219150;
        }
        .remove-btn {
            float: right;
            background: none;
            color: #999;
            font-size: 12px;
            margin-top: -38px;
            margin-right: 10px;
            position: relative;
            z-index: 10;
        }
        .remove-btn:hover {
            color: #e74c3c;
        }
    </style>
</head>
<body>

    <h1>城上 更新情報ジェネレーター</h1>

    <div class="card">
        <div class="input-group">
            <label for="dateInput">更新日</label>
            <input type="date" id="dateInput">
        </div>

        <div class="input-group">
            <label>■ 新規記事の追加</label>
            <div id="articlesContainer">
                <div class="input-wrapper">
                    <input type="text" class="article-input" placeholder="記事タイトルなどを入力">
                </div>
            </div>
            <button class="add-btn" onclick="addInput('articlesContainer', 'article-input', '記事タイトルなどを入力')">＋ 追加</button>
        </div>

        <div class="input-group">
            <label>■ 機能／コンテンツの追加</label>
            <div id="featuresContainer">
                <div class="input-wrapper">
                    <input type="text" class="feature-input" placeholder="機能内容などを入力">
                </div>
            </div>
            <button class="add-btn" onclick="addInput('featuresContainer', 'feature-input', '機能内容などを入力')">＋ 追加</button>
        </div>

        <button class="generate-btn" onclick="generateText()">お知らせを生成</button>
    </div>

    <div class="card result-area">
        <label>生成結果</label>
        <textarea id="resultText" readonly></textarea>
        <button class="copy-btn" onclick="copyToClipboard()">コピー</button>
    </div>

    <script>
        // ==========================================
        // 設定：リンク先URL
        // ==========================================
        const BLOG_LINK = "https://ruri-sayo.github.io/f53cfe5b31cafa1ddb061d46c22a2d5ca41f302bc889dc325f0423744834dd2a_WP_CM_blog/"; // ★ここ（リンクを入れてください）

        // 初期化：日付を今日に設定
        window.onload = function() {
            const today = new Date();
            const yyyy = today.getFullYear();
            const mm = String(today.getMonth() + 1).padStart(2, '0');
            const dd = String(today.getDate()).padStart(2, '0');
            document.getElementById('dateInput').value = `${yyyy}-${mm}-${dd}`;
        };

        // 入力欄を追加する関数
        function addInput(containerId, inputClass, placeholderText) {
            const container = document.getElementById(containerId);
            const div = document.createElement('div');
            div.className = 'input-wrapper';
            
            // 入力フィールド作成
            const input = document.createElement('input');
            input.type = 'text';
            input.className = inputClass;
            input.placeholder = placeholderText;
            
            // 削除ボタン作成（任意で消せるように）
            // ※もし不要ならこのブロックを削除してください
            /*
            const removeBtn = document.createElement('button');
            removeBtn.type = 'button';
            removeBtn.className = 'remove-btn';
            removeBtn.innerText = '削除';
            removeBtn.onclick = function() {
                container.removeChild(div);
            };
            div.appendChild(removeBtn);
            */

            div.appendChild(input);
            container.appendChild(div);
            
            // 追加された入力欄にフォーカス
            input.focus();
        }

        // テキスト生成関数
        function generateText() {
            const dateVal = document.getElementById('dateInput').value;
            
            // 各入力欄の値を取得・フィルタリング（空文字は除外）
            const articles = Array.from(document.querySelectorAll('.article-input'))
                                  .map(input => input.value.trim())
                                  .filter(val => val !== "");
                                  
            const features = Array.from(document.querySelectorAll('.feature-input'))
                                  .map(input => input.value.trim())
                                  .filter(val => val !== "");

            // 生成ロジック
            let result = `[城上 更新情報 / ${dateVal}]\n`;
            result += `以下の内容を更新しました。\n`;

            // 新規記事ブロック
            if (articles.length > 0) {
                result += `\n■ 新規記事の追加\n`;
                articles.forEach(item => {
                    result += `・${item}\n`;
                });
            }

            // 機能コンテンツブロック
            if (features.length > 0) {
                result += `\n■ 機能／コンテンツの追加\n`;
                features.forEach(item => {
                    result += `・${item}\n`;
                });
            }

            // フッターとリンク
            result += `\n詳細は城上をご確認ください。\n${BLOG_LINK}`;

            // 出力
            document.getElementById('resultText').value = result;
        }

        // コピー機能
        function copyToClipboard() {
            const copyText = document.getElementById("resultText");
            if (!copyText.value) return;

            copyText.select();
            copyText.setSelectionRange(0, 99999); // スマホ対策

            try {
                navigator.clipboard.writeText(copyText.value).then(() => {
                    alert("コピーしました！");
                });
            } catch (err) {
                // 古いブラウザ用フォールバック
                document.execCommand("copy");
                alert("コピーしました！");
            }
        }
    </script>
</body>
</html>