<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ミリオンライブ！アイドルデータ分析グラフ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #333;
            padding: 20px;
            margin: 0; /* Ensure no default body margin */
            overflow-x: hidden; /* Prevent horizontal scroll */
        }
        .chart-container {
            background-color: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.08);
            margin-bottom: 30px;
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            height: 500px; /* Default height for charts in grid view */
            position: relative; /* Needed for Chart.js canvas responsiveness */
            /* overflow: hidden; /* Optional: uncomment to strictly clip overflowing content */
        }
        .chart-container.hidden-chart {
            display: none;
        }
        .single-chart-view .chart-container:not(.hidden-chart) { /* Apply only to the visible chart in single view */
            height: calc(100vh - 220px); /* Adjusted height for single chart view, considering controls and header */
            min-height: 400px; /* Minimum height for single view */
        }

        /* Canvas specific styling to help contain it within the parent */
        .chart-container canvas {
            display: block; /* Ensure canvas behaves as a block-level element */
            max-width: 100%;  /* Prevent canvas from exceeding container width */
            max-height: 100%; /* Prevent canvas from exceeding container height */
            /* Chart.js will set width/height attributes; these CSS rules constrain the element's box */
        }

        .chart-title {
            font-size: 1.5em;
            font-weight: 600;
            margin-bottom: 15px;
            color: #2c3e50;
            text-align: center;
        }
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background-color: #f9fafb;
            border-radius: 8px;
        }
        .switch-label {
            font-size: 0.9em;
            color: #555;
            display: flex;
            align-items: center;
        }
        .correlation-info {
            font-size: 0.9em;
            font-weight: 500;
            color: #3498db;
        }
        /* Toggle Switch Styles */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 28px;
            margin-left: 8px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 28px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #4A90E2;
        }
        input:focus + .slider {
            box-shadow: 0 0 1px #4A90E2;
        }
        input:checked + .slider:before {
            transform: translateX(22px);
        }
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 25px;
        }
        .single-chart-view .chart-container:not(.hidden-chart) {
            grid-column: 1 / -1; /* Make the visible chart span full width */
        }


        .view-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            align-items: center;
            flex-wrap: wrap;
        }
        .view-controls button, .view-controls select {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background-color: #fff;
            color: #333;
            cursor: pointer;
            font-size: 0.95em;
            transition: background-color 0.2s, box-shadow 0.2s;
        }
        .view-controls button:hover, .view-controls select:hover {
            background-color: #f7f7f7;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        .view-controls button.active {
            background-color: #4A90E2;
            color: white;
            border-color: #4A90E2;
        }

        header { /* Ensure header doesn't cause overflow issues */
            width: 100%;
        }


        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            .correlation-info {
                margin-top: 5px;
            }
            .grid-container {
                grid-template-columns: 1fr; /* Mobile: 1 column */
            }
            .chart-container { /* Adjust height for mobile grid view */
                 height: 450px;
            }
            .single-chart-view .chart-container:not(.hidden-chart) { /* Adjust height for mobile single view */
                height: calc(100vh - 250px); /* Slightly more space for controls on mobile */
                min-height: 350px;
            }
            .view-controls {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>

    <header class="text-center mb-8">
        <h1 class="text-3xl font-bold text-indigo-700">ミリオンライブ！アイドルデータ 相関分析グラフ</h1>
        <p class="text-gray-600 mt-2">各アイドルの身体的特徴に関する相関関係を可視化します。</p>
    </header>

    <div class="view-controls">
        <button id="showAllChartsBtn" class="active">すべてのグラフを表示</button>
        <select id="chartSelector" class="flex-grow md:flex-grow-0">
            <option value="chart1">グラフ1: 身長 vs 年齢</option>
            <option value="chart2">グラフ2: 体重 vs 年齢</option>
            <option value="chart3">グラフ3: 体重 vs 身長</option>
            <option value="chart4">グラフ4: バスト vs ウエスト</option>
            <option value="chart5">グラフ5: ウエスト vs ヒップ</option>
            <option value="chart6">グラフ6: バスト vs ヒップ</option>
        </select>
        <button id="showSelectedChartBtn">選択したグラフを表示</button>
    </div>

    <div id="chartsGrid" class="grid-container">
        <div id="container-chart1" class="chart-container">
            <h2 class="chart-title">グラフ1: 身長 vs 年齢</h2>
            <div class="controls">
                <label class="switch-label">
                    馬場このみさんを含める:
                    <label class="switch">
                        <input type="checkbox" id="konomiSwitch1" checked>
                        <span class="slider round"></span>
                    </label>
                </label>
                <div id="correlationInfo1" class="correlation-info">相関係数: ...</div>
            </div>
            <canvas id="chart1"></canvas>
        </div>

        <div id="container-chart2" class="chart-container">
            <h2 class="chart-title">グラフ2: 体重 vs 年齢</h2>
            <div class="controls">
                <label class="switch-label">
                    馬場このみさんを含める:
                    <label class="switch">
                        <input type="checkbox" id="konomiSwitch2" checked>
                        <span class="slider round"></span>
                    </label>
                </label>
                <div id="correlationInfo2" class="correlation-info">相関係数: ...</div>
            </div>
            <canvas id="chart2"></canvas>
        </div>

        <div id="container-chart3" class="chart-container">
            <h2 class="chart-title">グラフ3: 体重 vs 身長</h2>
            <div class="controls">
                <label class="switch-label">
                    馬場このみさんを含める:
                    <label class="switch">
                        <input type="checkbox" id="konomiSwitch3" checked>
                        <span class="slider round"></span>
                    </label>
                </label>
                <div id="correlationInfo3" class="correlation-info">相関係数: ...</div>
            </div>
            <canvas id="chart3"></canvas>
        </div>

        <div id="container-chart4" class="chart-container">
            <h2 class="chart-title">グラフ4: バスト vs ウエスト</h2>
            <div class="controls">
                <label class="switch-label">
                    馬場このみさんを含める:
                    <label class="switch">
                        <input type="checkbox" id="konomiSwitch4" checked>
                        <span class="slider round"></span>
                    </label>
                </label>
                <div id="correlationInfo4" class="correlation-info">相関係数: ...</div>
            </div>
            <canvas id="chart4"></canvas>
        </div>

        <div id="container-chart5" class="chart-container">
            <h2 class="chart-title">グラフ5: ウエスト vs ヒップ</h2>
            <div class="controls">
                <label class="switch-label">
                    馬場このみさんを含める:
                    <label class="switch">
                        <input type="checkbox" id="konomiSwitch5" checked>
                        <span class="slider round"></span>
                    </label>
                </label>
                <div id="correlationInfo5" class="correlation-info">相関係数: ...</div>
            </div>
            <canvas id="chart5"></canvas>
        </div>

        <div id="container-chart6" class="chart-container">
            <h2 class="chart-title">グラフ6: バスト vs ヒップ</h2>
            <div class="controls">
                <label class="switch-label">
                    馬場このみさんを含める:
                    <label class="switch">
                        <input type="checkbox" id="konomiSwitch6" checked>
                        <span class="slider round"></span>
                    </label>
                </label>
                <div id="correlationInfo6" class="correlation-info">相関係数: ...</div>
            </div>
            <canvas id="chart6"></canvas>
        </div>
    </div>

    <script>
        // アイドルデータ (変更なし)
        const idolData = [
            { name: "天海 春香", type: "Princess", age: 17, height: 158, weight: 46, bust: 83, waist: 56, hip: 82 },
            { name: "エミリー スチュアート", type: "Princess", age: 13, height: 156, weight: 41, bust: 74, waist: 54, hip: 76 },
            { name: "春日 未来", type: "Princess", age: 14, height: 156, weight: 42, bust: 78, waist: 54, hip: 77 },
            { name: "我那覇 響", type: "Princess", age: 16, height: 152, weight: 41, bust: 83, waist: 56, hip: 80 },
            { name: "菊地 真", type: "Princess", age: 17, height: 159, weight: 44, bust: 75, waist: 57, hip: 78 },
            { name: "高坂 海美", type: "Princess", age: 16, height: 155, weight: 45, bust: 82, waist: 57, hip: 84 },
            { name: "佐竹 美奈子", type: "Princess", age: 18, height: 158, weight: 45, bust: 86, waist: 54, hip: 82 },
            { name: "高山 紗代子", type: "Princess", age: 17, height: 156, weight: 42, bust: 82, waist: 55, hip: 80 },
            { name: "田中 琴葉", type: "Princess", age: 18, height: 157, weight: 44, bust: 79, waist: 55, hip: 78 },
            { name: "徳川 まつり", type: "Princess", age: 19, height: 163, weight: 44, bust: 85, waist: 59, hip: 85 },
            { name: "中谷 育", type: "Princess", age: 10, height: 142, weight: 37, bust: 72, waist: 52, hip: 73 },
            { name: "七尾 百合子", type: "Princess", age: 15, height: 154, weight: 41, bust: 78, waist: 56, hip: 80 },
            { name: "萩原 雪歩", type: "Princess", age: 17, height: 155, weight: 42, bust: 81, waist: 56, hip: 81 },
            { name: "福田 のり子", type: "Princess", age: 18, height: 164, weight: 48, bust: 87, waist: 58, hip: 87 },
            { name: "松田 亜利沙", type: "Princess", age: 16, height: 154, weight: 40, bust: 81, waist: 54, hip: 80 },
            { name: "矢吹 可奈", type: "Princess", age: 14, height: 155, weight: 43, bust: 77, waist: 54, hip: 76 },
            { name: "横山 奈緒", type: "Princess", age: 17, height: 159, weight: 46, bust: 84, waist: 57, hip: 83 },
            { name: "秋月 律子", type: "Fairy", age: 19, height: 156, weight: 43, bust: 85, waist: 57, hip: 85 },
            { name: "如月 千早", type: "Fairy", age: 16, height: 162, weight: 41, bust: 72, waist: 55, hip: 78 },
            { name: "北沢 志保", type: "Fairy", age: 14, height: 161, weight: 46, bust: 83, waist: 56, hip: 84 },
            { name: "四条 貴音", type: "Fairy", age: 18, height: 169, weight: 49, bust: 90, waist: 62, hip: 92 },
            { name: "ジュリア", type: "Fairy", age: 16, height: 157, weight: 43, bust: 79, waist: 54, hip: 80 },
            { name: "白石 紬", type: "Fairy", age: 17, height: 160, weight: 45, bust: 82, waist: 56, hip: 83 },
            { name: "周防 桃子", type: "Fairy", age: 11, height: 140, weight: 35, bust: 73, waist: 53, hip: 74 },
            { name: "天空橋 朋花", type: "Fairy", age: 15, height: 156, weight: 41, bust: 80, waist: 56, hip: 79 },
            { name: "所 恵美", type: "Fairy", age: 16, height: 159, weight: 47, bust: 88, waist: 56, hip: 85 },
            { name: "永吉 昴", type: "Fairy", age: 15, height: 154, weight: 41, bust: 79, waist: 59, hip: 78 },
            { name: "二階堂 千鶴", type: "Fairy", age: 21, height: 165, weight: 50, bust: 85, waist: 58, hip: 86 },
            { name: "ロコ", type: "Fairy", age: 15, height: 154, weight: 42, bust: 78, waist: 57, hip: 77 },
            { name: "舞浜 歩", type: "Fairy", age: 19, height: 158, weight: 49.9, bust: 86, waist: 60, hip: 88 },
            { name: "真壁 瑞希", type: "Fairy", age: 17, height: 160, weight: 43, bust: 73, waist: 54, hip: 77 },
            { name: "水瀬 伊織", type: "Fairy", age: 15, height: 153, weight: 40, bust: 77, waist: 54, hip: 79 },
            { name: "最上 静香", type: "Fairy", age: 14, height: 162, weight: 44, bust: 76, waist: 53, hip: 77 },
            { name: "百瀬 莉緒", type: "Fairy", age: 23, height: 168, weight: 46, bust: 84, waist: 57, hip: 84 },
            { name: "伊吹 翼", type: "Angel", age: 14, height: 158, weight: 43, bust: 85, waist: 52, hip: 82 },
            { name: "大神 環", type: "Angel", age: 12, height: 147, weight: 39, bust: 76, waist: 51, hip: 77 },
            { name: "北上 麗花", type: "Angel", age: 20, height: 164, weight: 47, bust: 84, waist: 58, hip: 84 },
            { name: "木下 ひなた", type: "Angel", age: 14, height: 146, weight: 39.5, bust: 74, waist: 55, hip: 78 },
            { name: "桜守 歌織", type: "Angel", age: 23, height: 165, weight: 47, bust: 88, waist: 58, hip: 85 },
            { name: "篠宮 可憐", type: "Angel", age: 16, height: 159, weight: 48, bust: 90, waist: 59, hip: 90 },
            { name: "島原 エレナ", type: "Angel", age: 17, height: 160, weight: 47, bust: 85, waist: 58, hip: 86 },
            { name: "高槻 やよい", type: "Angel", age: 14, height: 145, weight: 37, bust: 74, waist: 54, hip: 78 },
            { name: "豊川 風花", type: "Angel", age: 22, height: 162, weight: 51, bust: 93, waist: 63, hip: 91 },
            { name: "野々原 茜", type: "Angel", age: 16, height: 150, weight: 42, bust: 80, waist: 58, hip: 79 },
            { name: "箱崎 星梨花", type: "Angel", age: 13, height: 146, weight: 37, bust: 74, waist: 54, hip: 76 },
            { name: "馬場 このみ", type: "Angel", age: 24, height: 143, weight: 37, bust: 75, waist: 55, hip: 79 },
            { name: "双海 亜美", type: "Angel", age: 13, height: 158, weight: 42, bust: 78, waist: 55, hip: 77 },
            { name: "双海 真美", type: "Angel", age: 13, height: 158, weight: 42, bust: 78, waist: 55, hip: 77 },
            { name: "星井 美希", type: "Angel", age: 15, height: 161, weight: 45, bust: 86, waist: 55, hip: 83 },
            { name: "三浦 あずさ", type: "Angel", age: 21, height: 168, weight: 48, bust: 91, waist: 59, hip: 86 },
            { name: "宮尾 美也", type: "Angel", age: 17, height: 156, weight: 46, bust: 84, waist: 58, hip: 83 },
            { name: "望月 杏奈", type: "Angel", age: 14, height: 152, weight: 41, bust: 78, waist: 53, hip: 79 }
        ];

        // 色の定義 (変更なし)
        const typeColors = {
            Princess: 'rgba(234, 91, 118, 0.7)', Angel: 'rgba(254, 213, 82, 0.7)', Fairy: 'rgba(100, 149, 207, 0.7)'
        };
        const typeBorderColors = {
            Princess: 'rgb(234, 91, 118)', Angel: 'rgb(254, 213, 82)', Fairy: 'rgb(100, 149, 207)'
        };

        // 相関係数計算関数 (変更なし)
        function calculateCorrelation(data) {
            if (data.length < 2) return 0;
            let sumX = 0, sumY = 0, sumXY = 0, sumX2 = 0, sumY2 = 0;
            const n = data.length;
            data.forEach(point => {
                sumX += point.x; sumY += point.y; sumXY += point.x * point.y;
                sumX2 += point.x * point.x; sumY2 += point.y * point.y;
            });
            const numerator = n * sumXY - sumX * sumY;
            const denominator = Math.sqrt((n * sumX2 - sumX * sumX) * (n * sumY2 - sumY * sumY));
            if (denominator === 0) return 0;
            return numerator / denominator;
        }

        // チャート作成/更新関数 (変更なし)
        function createOrUpdateChart(chartId, konomiSwitchId, correlationInfoId, xKey, yKey, xLabel, yLabel) {
            const ctx = document.getElementById(chartId).getContext('2d');
            const includeKonomi = document.getElementById(konomiSwitchId).checked;
            let currentIdolData = [...idolData];
            if (!includeKonomi) {
                currentIdolData = currentIdolData.filter(idol => idol.name !== "馬場 このみ");
            }

            const datasets = Object.keys(typeColors).map(type => ({
                label: type,
                data: currentIdolData.filter(idol => idol.type === type).map(idol => ({ x: idol[xKey], y: idol[yKey], name: idol.name })),
                backgroundColor: typeColors[type], borderColor: typeBorderColors[type], borderWidth: 1, pointRadius: 5, pointHoverRadius: 7.5, tension: 0.1
            }));
            
            const allPointsForRegression = currentIdolData.map(idol => ({ x: idol[xKey], y: idol[yKey] }));
            const correlation = calculateCorrelation(allPointsForRegression);
            document.getElementById(correlationInfoId).textContent = `相関係数: ${correlation.toFixed(3)}`;

            if (window[chartId + '_instance']) {
                window[chartId + '_instance'].destroy(); 
            }
            
            window[chartId + '_instance'] = new Chart(ctx, {
                type: 'scatter', data: { datasets: datasets },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    scales: {
                        x: { title: { display: true, text: xLabel, font: {size: 14}}, ticks: { font: { size: 12 } } },
                        y: { title: { display: true, text: yLabel, font: {size: 14}}, ticks: { font: { size: 12 } } }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || ''; if (label) { label += ': '; }
                                    const point = context.raw; label += `${point.name} (${xKey}: ${point.x}, ${yKey}: ${point.y})`; return label;
                                }
                            }, bodyFont: { size: 13 }, titleFont: { size: 14 }
                        },
                        legend: { position: 'top', labels: { font: { size: 13 } } }
                    }
                }
            });
            
            const chartInstance = window[chartId + '_instance'];
            if (allPointsForRegression.length >= 2) {
                let sumX = 0, sumY = 0, sumXY = 0, sumX2 = 0; const n = allPointsForRegression.length;
                allPointsForRegression.forEach(p => { sumX += p.x; sumY += p.y; sumXY += p.x * p.y; sumX2 += p.x * p.x; });
                const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
                const intercept = (sumY - slope * sumX) / n;
                if (isFinite(slope) && isFinite(intercept)) {
                    const xValues = allPointsForRegression.map(p => p.x).sort((a, b) => a - b);
                    const minX = xValues[0]; const maxX = xValues[xValues.length - 1];
                    const regressionLineData = [{ x: minX, y: slope * minX + intercept }, { x: maxX, y: slope * maxX + intercept }];
                    chartInstance.data.datasets.push({
                        label: '近似曲線', data: regressionLineData, type: 'line',
                        borderColor: 'rgba(220, 53, 69, 0.8)', borderWidth: 2.5, fill: false, pointRadius: 0, tension: 0
                    });
                }
            }
            chartInstance.update();
        }

        // チャート設定 (変更なし)
        const chartsConfig = [
            { id: 'chart1', konomiSwitchId: 'konomiSwitch1', correlationId: 'correlationInfo1', xKey: 'height', yKey: 'age', xLabel: '身長 (cm)', yLabel: '年齢 (歳)' },
            { id: 'chart2', konomiSwitchId: 'konomiSwitch2', correlationId: 'correlationInfo2', xKey: 'weight', yKey: 'age', xLabel: '体重 (kg)', yLabel: '年齢 (歳)' },
            { id: 'chart3', konomiSwitchId: 'konomiSwitch3', correlationId: 'correlationInfo3', xKey: 'weight', yKey: 'height', xLabel: '体重 (kg)', yLabel: '身長 (cm)' },
            { id: 'chart4', konomiSwitchId: 'konomiSwitch4', correlationId: 'correlationInfo4', xKey: 'bust', yKey: 'waist', xLabel: 'バスト (cm)', yLabel: 'ウエスト (cm)' },
            { id: 'chart5', konomiSwitchId: 'konomiSwitch5', correlationId: 'correlationInfo5', xKey: 'waist', yKey: 'hip', xLabel: 'ウエスト (cm)', yLabel: 'ヒップ (cm)' },
            { id: 'chart6', konomiSwitchId: 'konomiSwitch6', correlationId: 'correlationInfo6', xKey: 'bust', yKey: 'hip', xLabel: 'バスト (cm)', yLabel: 'ヒップ (cm)' },
        ];

        // 初期化とイベントリスナー (変更なし)
        chartsConfig.forEach(config => {
            createOrUpdateChart(config.id, config.konomiSwitchId, config.correlationId, config.xKey, config.yKey, config.xLabel, config.yLabel);
            document.getElementById(config.konomiSwitchId).addEventListener('change', () => {
                createOrUpdateChart(config.id, config.konomiSwitchId, config.correlationId, config.xKey, config.yKey, config.xLabel, config.yLabel);
            });
        });

        // 表示切り替え機能 (変更なし)
        const showAllChartsBtn = document.getElementById('showAllChartsBtn');
        const showSelectedChartBtn = document.getElementById('showSelectedChartBtn');
        const chartSelector = document.getElementById('chartSelector');
        const chartsGrid = document.getElementById('chartsGrid');
        const allChartContainers = chartsConfig.map(config => document.getElementById(`container-${config.id}`));

        function updateChartView() {
            const isSingleView = showSelectedChartBtn.classList.contains('active');
            chartsGrid.classList.toggle('single-chart-view', isSingleView);

            const selectedChartContainerId = `container-${chartSelector.value}`;

            allChartContainers.forEach(container => {
                const isSelected = container.id === selectedChartContainerId;
                container.classList.toggle('hidden-chart', isSingleView && !isSelected);
            });
            
             setTimeout(() => { 
                chartsConfig.forEach(config => {
                    const chartInstance = window[config.id + '_instance'];
                    const container = document.getElementById(`container-${config.id}`);
                    if (chartInstance && container && !container.classList.contains('hidden-chart')) { // Check container existence
                        chartInstance.resize();
                    }
                });
            }, 0);
        }

        showAllChartsBtn.addEventListener('click', () => {
            showAllChartsBtn.classList.add('active');
            showSelectedChartBtn.classList.remove('active');
            updateChartView();
        });

        showSelectedChartBtn.addEventListener('click', () => {
            showSelectedChartBtn.classList.add('active');
            showAllChartsBtn.classList.remove('active');
            updateChartView();
        });
        
        chartSelector.addEventListener('change', () => {
            if (showSelectedChartBtn.classList.contains('active')) {
                updateChartView();
            }
        });
        
        updateChartView(); 

        let resizeTimeout;
        function debouncedResizeCharts() {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                 chartsConfig.forEach(config => {
                    const chartInstance = window[config.id + '_instance'];
                    const container = document.getElementById(`container-${config.id}`);
                    if (chartInstance && container && !container.classList.contains('hidden-chart')) {
                         try {
                            chartInstance.resize();
                         } catch (e) {
                             console.error("Error resizing chart:", config.id, e);
                         }
                    }
                });
            }, 150); 
        }
        window.addEventListener('resize', debouncedResizeCharts);

    </script>
</body>
</html>
