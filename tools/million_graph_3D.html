<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>アイドルの身長・年齢・体重 3D相関グラフ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Interフォントを全体に適用 */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Plotlyのグラフコンテナが親要素のサイズに追従するように */
        .plotly-graph-div {
            width: 100% !important;
            height: 100% !important;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-100 via-purple-100 to-indigo-100 flex flex-col items-center justify-center min-h-screen p-4 selection:bg-pink-500 selection:text-white">
    <div class="bg-white p-6 md:p-8 rounded-xl shadow-2xl w-full max-w-6xl">
        <header class="mb-6 md:mb-8">
            <h1 class="text-2xl md:text-3xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500">
                ミリオンライブ！ アイドルの身長・年齢・体重 3D分布
            </h1>
        </header>

        <div id="idol3dChartContainer" class="relative h-[70vh] md:h-[80vh] w-full rounded-lg overflow-hidden shadow-inner bg-gray-50 p-1">
            <div id="idol3dChart"></div>
        </div>

        <div class="mt-6 text-center text-gray-600 text-sm md:text-base">
            <p>グラフ上の点をクリックまたはホバーすると詳細が表示されます。マウスでドラッグするとグラフを回転できます。</p>
        </div>

        <footer class="mt-8 text-center text-xs text-gray-500">
            <p>データ出典: 提供された「ミリオンライブ！アイドルデータ分析と可視化」ドキュメント</p>
            <p>グラフ作成: Plotly.js, スタイリング: Tailwind CSS</p>
        </footer>
    </div>

    <script>
        // ミリオンライブ！アイドルのデータ (名前, 年齢, 身長cm, 体重kg)
        // 提供されたドキュメントの「表1：ミリオンライブ！アイドル プロフィールデータ」より抽出
        const idolData3D = [
            { name: "天海 春香", age: 17, height: 158, weight: 46 },
            { name: "エミリー スチュアート", age: 13, height: 156, weight: 41 },
            { name: "春日 未来", age: 14, height: 156, weight: 42 },
            { name: "我那覇 響", age: 16, height: 152, weight: 41 },
            { name: "菊地 真", age: 17, height: 159, weight: 44 },
            { name: "高坂 海美", age: 16, height: 155, weight: 45 },
            { name: "佐竹 美奈子", age: 18, height: 158, weight: 45 },
            { name: "高山 紗代子", age: 17, height: 156, weight: 42 },
            { name: "田中 琴葉", age: 18, height: 157, weight: 44 },
            { name: "徳川 まつり", age: 19, height: 163, weight: 44 },
            { name: "中谷 育", age: 10, height: 142, weight: 37 },
            { name: "七尾 百合子", age: 15, height: 154, weight: 41 },
            { name: "萩原 雪歩", age: 17, height: 155, weight: 42 },
            { name: "福田 のり子", age: 18, height: 164, weight: 48 },
            { name: "松田 亜利沙", age: 16, height: 154, weight: 40 },
            { name: "矢吹 可奈", age: 14, height: 155, weight: 43 },
            { name: "横山 奈緒", age: 17, height: 159, weight: 46 },
            { name: "秋月 律子", age: 19, height: 156, weight: 43 },
            { name: "如月 千早", age: 16, height: 162, weight: 41 },
            { name: "北沢 志保", age: 14, height: 161, weight: 46 },
            { name: "四条 貴音", age: 18, height: 169, weight: 49 },
            { name: "ジュリア", age: 16, height: 157, weight: 43 },
            { name: "白石 紬", age: 17, height: 160, weight: 45 },
            { name: "周防 桃子", age: 11, height: 140, weight: 35 },
            { name: "天空橋 朋花", age: 15, height: 156, weight: 41 },
            { name: "所 恵美", age: 16, height: 159, weight: 47 },
            { name: "永吉 昴", age: 15, height: 154, weight: 41 },
            { name: "二階堂 千鶴", age: 21, height: 165, weight: 50 },
            { name: "ロコ", age: 15, height: 154, weight: 42 },
            { name: "舞浜 歩", age: 19, height: 158, weight: 49.9 }, // 体重49.9kgのデータあり
            { name: "真壁 瑞希", age: 17, height: 160, weight: 43 },
            { name: "水瀬 伊織", age: 15, height: 153, weight: 40 },
            { name: "最上 静香", age: 14, height: 162, weight: 44 },
            { name: "百瀬 莉緒", age: 23, height: 168, weight: 46 },
            { name: "伊吹 翼", age: 14, height: 158, weight: 43 },
            { name: "大神 環", age: 12, height: 147, weight: 39 },
            { name: "北上 麗花", age: 20, height: 164, weight: 47 },
            { name: "木下 ひなた", age: 14, height: 146, weight: 39.5 }, // 体重39.5kgのデータあり
            { name: "桜守 歌織", age: 23, height: 165, weight: 47 },
            { name: "篠宮 可憐", age: 16, height: 159, weight: 48 },
            { name: "島原 エレナ", age: 17, height: 160, weight: 47 },
            { name: "高槻 やよい", age: 14, height: 145, weight: 37 },
            { name: "豊川 風花", age: 22, height: 162, weight: 51 },
            { name: "野々原 茜", age: 16, height: 150, weight: 42 },
            { name: "箱崎 星梨花", age: 13, height: 146, weight: 37 },
            { name: "馬場 このみ", age: 24, height: 143, weight: 37 },
            { name: "双海 亜美", age: 13, height: 158, weight: 42 },
            { name: "双海 真美", age: 13, height: 158, weight: 42 },
            { name: "星井 美希", age: 15, height: 161, weight: 45 },
            { name: "三浦 あずさ", age: 21, height: 168, weight: 48 },
            { name: "宮尾 美也", age: 17, height: 156, weight: 46 },
            { name: "望月 杏奈", age: 14, height: 152, weight: 41 }
        ];

        // Plotly.jsで3D散布図を描画
        const trace = {
            x: idolData3D.map(idol => idol.height), // x軸: 身長
            y: idolData3D.map(idol => idol.age),    // y軸: 年齢
            z: idolData3D.map(idol => idol.weight), // z軸: 体重
            mode: 'markers', // 点で表示
            type: 'scatter3d', // 3D散布図
            text: idolData3D.map(idol => `${idol.name}<br>身長: ${idol.height}cm<br>年齢: ${idol.age}歳<br>体重: ${idol.weight}kg`), // ホバー時に表示するテキスト
            hoverinfo: 'text', // ホバー時にtextプロパティの内容を表示
            marker: {
                size: 6, // マーカーのサイズ
                color: idolData3D.map(idol => idol.age), // 年齢に応じて色分け (例)
                colorscale: 'Viridis', // カラースケール (Plotlyで利用可能なもの)
                opacity: 0.8, // マーカーの透明度
                line: {
                    color: 'rgba(50, 50, 50, 0.5)', // マーカーの境界線の色
                    width: 0.5 // マーカーの境界線の太さ
                }
            }
        };

        const layout = {
            title: {
                text: 'アイドルの身長・年齢・体重の3D分布',
                font: {
                    size: 18,
                    color: '#333'
                },
                y: 0.95 // タイトルの垂直位置
            },
            scene: {
                xaxis: {
                    title: '身長 (cm)',
                    titlefont: { color: '#4A5568', size: 12 },
                    tickfont: { color: '#4A5568', size: 10 },
                    gridcolor: 'rgba(200, 200, 200, 0.3)',
                    zerolinecolor: 'rgba(150,150,150,0.5)'
                },
                yaxis: {
                    title: '年齢 (歳)',
                    titlefont: { color: '#4A5568', size: 12 },
                    tickfont: { color: '#4A5568', size: 10 },
                    gridcolor: 'rgba(200, 200, 200, 0.3)',
                    zerolinecolor: 'rgba(150,150,150,0.5)'
                },
                zaxis: {
                    title: '体重 (kg)',
                    titlefont: { color: '#4A5568', size: 12 },
                    tickfont: { color: '#4A5568', size: 10 },
                    gridcolor: 'rgba(200, 200, 200, 0.3)',
                    zerolinecolor: 'rgba(150,150,150,0.5)'
                },
                camera: { // カメラの初期位置と向き
                    eye: {x: 1.8, y: 1.8, z: 0.8}, // 少し上からの視点
                    up: {x: 0, y: 0, z: 1} // z軸を上方向とする
                },
                aspectmode: 'cube' // 各軸のスケールを等しくして立方体として表示
            },
            margin: { // グラフのマージン
                l: 20, r: 20, b: 20, t: 60 // 上マージンを少し広めに取りタイトルスペース確保
            },
            paper_bgcolor: 'rgba(249, 250, 251, 1)', // グラフ全体の背景色 (bg-gray-50 に近い色)
            plot_bgcolor: 'rgba(249, 250, 251, 1)'   // プロットエリアの背景色
        };

        // グラフのコンフィグレーション
        const config = {
            responsive: true, // レスポンシブ対応
            displaylogo: false, // Plotlyのロゴを非表示
            modeBarButtonsToRemove: ['toImage', 'sendDataToCloud'] // 不要なモードバーボタンを削除
        };

        // グラフを描画
        Plotly.newPlot('idol3dChart', [trace], layout, config);

        // ウィンドウリサイズ時にグラフもリサイズ
        // Plotlyはデフォルトでレスポンシブですが、コンテナのサイズ変更を検知させるために明示的に行うこともあります。
        // ただし、Plotly.js自体がコンテナのリサイズを監視するため、多くの場合不要です。
        // window.addEventListener('resize', () => {
        //     Plotly.Plots.resize(document.getElementById('idol3dChart'));
        // });

    </script>
</body>
</html>

