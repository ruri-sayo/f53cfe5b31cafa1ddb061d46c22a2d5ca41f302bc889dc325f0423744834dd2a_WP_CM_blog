<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Front Matter Generator (1-file)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gray-50 text-slate-800 p-4 md:p-8 font-sans">
  <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100">
    <!-- Header -->
    <div class="bg-slate-800 p-6 text-white flex items-center gap-3">
      <!-- 簡易アイコン（ファイル） -->
      <div class="w-8 h-8 rounded-lg bg-emerald-500/20 flex items-center justify-center border border-emerald-400/40">
        <span class="text-emerald-300 text-lg font-bold">Y</span>
      </div>
      <h1 class="text-xl font-bold tracking-wide">ブログ用フロントタグ生成 (v1)</h1>
    </div>

    <div class="p-6 md:p-8 space-y-6">
      <!-- Form Section -->
      <div class="space-y-4">
        <!-- Title Input -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1 flex items-center gap-2">
            <span class="inline-flex items-center justify-center w-5 h-5 rounded bg-gray-100 text-[10px] font-bold text-gray-500">T</span>
            タイトル
          </label>
          <input
            id="titleInput"
            type="text"
            placeholder="記事のタイトルを入力"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all"
          />
        </div>

        <!-- Date Input -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1 flex items-center gap-2">
            <span class="inline-flex items-center justify-center w-5 h-5 rounded bg-gray-100 text-[10px] font-bold text-gray-500">D</span>
            日付 (Date)
          </label>
          <input
            id="dateInput"
            type="text"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 focus:bg-white focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all font-mono text-sm"
          />
          <p class="text-xs text-gray-400 mt-1 ml-1">デフォルト: 本日12:00 (編集可能) / 例: 2025-12-08 12:00:00 +0900</p>
        </div>

        <!-- Category Select -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1 flex items-center gap-2">
            <span class="inline-flex items-center justify-center w-5 h-5 rounded bg-gray-100 text-[10px] font-bold text-gray-500">C</span>
            カテゴリ
          </label>
          <div class="relative">
            <select
              id="categorySelect"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg appearance-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all bg-white"
            >
              <option value="">--カテゴリを選択--</option>
              <option value="Knowledge">Knowledge</option>
              <option value="Theory">Theory</option>
              <option value="Essay">Essay</option>
              <option value="Dev Log">Dev Log</option>
              <option value="notic">notic</option>
            </select>
            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
              <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/>
              </svg>
            </div>
          </div>
        </div>

        <!-- Description Input -->
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1 flex items-center gap-2">
            <span class="inline-flex items-center justify-center w-5 h-5 rounded bg-gray-100 text-[10px] font-bold text-gray-500">D</span>
            Description
          </label>
          <textarea
            id="descriptionInput"
            rows="3"
            placeholder="記事の概要を記述"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all resize-none"
          ></textarea>
        </div>

        <!-- Generate Button -->
        <button
          id="generateBtn"
          class="w-full bg-slate-800 hover:bg-slate-700 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:shadow-lg transform transition-all active:scale-[0.98] flex justify-center items-center gap-2"
        >
          <span class="inline-flex items-center justify-center w-5 h-5 rounded bg-emerald-500 text-[11px] font-bold text-white">FM</span>
          フロントタグを生成
        </button>
      </div>

      <!-- Result Section -->
      <div id="resultSection" class="mt-4 hidden">
        <div class="relative">
          <div class="absolute -top-3 left-4 bg-white px-2 text-xs font-bold text-emerald-600 border border-emerald-100 rounded-full shadow-sm">
            Generated Result
          </div>

          <textarea
            id="resultTextarea"
            readonly
            class="w-full h-48 p-4 bg-slate-900 text-emerald-300 font-mono text-sm rounded-lg border-2 border-slate-700 focus:border-emerald-500 outline-none resize-none shadow-inner"
          ></textarea>

          <div class="absolute top-2 right-2">
            <button
              id="copyBtn"
              class="flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-bold transition-all shadow-sm bg-white text-slate-700 border border-gray-200 hover:bg-gray-50"
            >
              Copy
            </button>
          </div>
        </div>
        <p class="text-xs text-gray-400 mt-2 text-center">
          右上のコピーボタンを押してブログ記事の冒頭に貼り付けてください
        </p>
      </div>
    </div>
  </div>

  <script>
    (function () {
      const titleInput = document.getElementById('titleInput');
      const dateInput = document.getElementById('dateInput');
      const categorySelect = document.getElementById('categorySelect');
      const descriptionInput = document.getElementById('descriptionInput');
      const generateBtn = document.getElementById('generateBtn');
      const resultSection = document.getElementById('resultSection');
      const resultTextarea = document.getElementById('resultTextarea');
      const copyBtn = document.getElementById('copyBtn');

      const copyBtnDefaultClass =
        'flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-bold transition-all shadow-sm bg-white text-slate-700 border border-gray-200 hover:bg-gray-50';
      const copyBtnCopiedClass =
        'flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-bold transition-all shadow-sm bg-emerald-500 text-white border border-emerald-500';

      // 初期日付をセット（YYYY-MM-DD 12:00:00 +0900）
      function initDate() {
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const defaultDate = year + '-' + month + '-' + day + ' 12:00:00 +0900';
        dateInput.value = defaultDate;
      }

      // Front Matter 生成
      function generateFrontMatter() {
        const title = titleInput.value.trim();
        const dateStr = dateInput.value.trim();
        const category = categorySelect.value.trim();
        const description = descriptionInput.value.trim();

        const categoryLine = category
          ? 'categories: [' + category + ']'
          : 'categories: []';

        const yaml =
`---
layout: post
title: ${title}
date:   ${dateStr}
${categoryLine}
description: ${description}
---`;

        resultTextarea.value = yaml;
        resultSection.classList.remove('hidden');

        // コピー表示をリセット
        copyBtn.className = copyBtnDefaultClass;
        copyBtn.textContent = 'Copy';
      }

      // クリップボードコピー
      function copyToClipboard() {
        const text = resultTextarea.value;
        if (!text) return;

        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard.writeText(text)
            .then(showCopyFeedback)
            .catch(function () {
              fallbackCopy(text);
            });
        } else {
          fallbackCopy(text);
        }
      }

      function fallbackCopy(text) {
        const textArea = document.createElement('textarea');
        textArea.value = text;
        textArea.style.position = 'fixed';
        textArea.style.left = '-9999px';
        textArea.style.top = '0';
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        try {
          document.execCommand('copy');
          showCopyFeedback();
        } catch (e) {
          console.error('コピーに失敗しました', e);
        }
        document.body.removeChild(textArea);
      }

      function showCopyFeedback() {
        copyBtn.className = copyBtnCopiedClass;
        copyBtn.textContent = 'Copied!';
        setTimeout(function () {
          copyBtn.className = copyBtnDefaultClass;
          copyBtn.textContent = 'Copy';
        }, 2000);
      }

      // イベント登録
      generateBtn.addEventListener('click', generateFrontMatter);
      copyBtn.addEventListener('click', copyToClipboard);

      // 初期化
      initDate();
    })();
  </script>
</body>
</html>
